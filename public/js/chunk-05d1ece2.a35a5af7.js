(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05d1ece2"],{"09d9":function(t,e,a){"use strict";var r=a("ce65"),s=a.n(r);s.a},2708:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var r={methods:{handleResult:function(t,e){var a={arrKeys:[],arrTitles:[],tableDatas:[],total:0};if(t&&t.data){var r=t.data;if(r.arrTitles&&r.arrTitles.arrString&&r.arrTitles.arrString.length&&(a.arrTitles=r.arrTitles.arrString),r.arrKeys&&r.arrKeys.arrString&&r.arrKeys.arrString.length&&(a.arrKeys=r.arrKeys.arrString),a.arrKeys.length||(a.arrKeys=a.arrTitles),e||(e=a.arrKeys),r.arrDatas&&r.arrDatas.length)for(var s=0;s<r.arrDatas.length;s++){for(var i={},n=0;n<e.length;n++)i[e[n]]=r.arrDatas[s].arrString[n];a.tableDatas.push(i)}a.total=r.nTotal?r.nTotal:0}return a},IUDSuccess:function(t){return!(t&&t.data&&t.data.hasOwnProperty("result")&&1===t.data.result)},exportData:function(t,e){this.$refs[t].exportCsv({filename:e})}}}},"4ed5":function(t,e,a){"use strict";var r=a("a2ea"),s=a.n(r);s.a},a2ea:function(t,e,a){},ce65:function(t,e,a){},e7c5:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"home-main"},[a("div",{staticClass:"home-top"},[a("div",{staticClass:"top-title"},[t._m(0),a("Button",{staticClass:"title-refresh",attrs:{icon:"loop",loading:t.loading},on:{click:t.toLoading}},[t._v("刷新")])],1)]),a("div",{staticClass:"home-data"},[a("div",{staticClass:"statistics-box"},[a("div",{staticClass:"statistics-item"},[t._v(t._s(t.arrTitles[0])+"："+t._s(t.arrDatas[0]))]),a("div",{staticClass:"statistics-item"},[t._v(t._s(t.arrTitles[1])+"："+t._s(t.arrDatas[1]))]),a("div",{staticClass:"statistics-item"},[t._v(t._s(t.arrTitles[2])+"："+t._s(t.arrDatas[2]))]),a("div",{staticClass:"statistics-item"},[t._v(t._s(t.arrTitles[3])+"："+t._s(t.arrDatas[3]))]),a("div",{staticClass:"statistics-item"},[t._v(t._s(t.arrTitles[4])+"："+t._s(t.arrDatas[4]))]),a("div",{staticClass:"statistics-item"},[t._v(t._s(t.arrTitles[5])+"："+t._s(t.arrDatas[5]))]),a("div",{staticClass:"statistics-item"},[t._v(t._s(t.arrTitles[6])+"："+t._s(t.arrDatas[6]))]),a("div",{staticClass:"statistics-item"},[t._v(t._s(t.arrTitles[7])+"："+t._s(t.arrDatas[7]))])])]),a("div",{staticClass:"home-report"},[a("div",{staticClass:"home-report-top"},[a("span",{staticClass:"report-public"},[t._v(" 公告信息 ")]),a("Button",{staticClass:"publish-btn",on:{click:t.showAddModal}},[t._v("发布公告")]),a("a",{staticClass:"more-btn",on:{click:t.queryMore}},[t._v("更多公告")])],1),a("Table",{attrs:{loading:t.moreLoading,columns:t.columns,"disabled-hover":"",data:t.tableDatas,"show-header":!1,height:"400",stripe:""}})],1)]),a("Modal",{attrs:{width:"720"},model:{value:t.modal5,callback:function(e){t.modal5=e},expression:"modal5"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.title))])]),a("div",{domProps:{innerHTML:t._s(t.content)}}),a("div",{attrs:{slot:"footer"},slot:"footer"})]),a("Modal",{attrs:{title:"添加公告信息",width:"600"},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[a("Form",{ref:"formValidate",attrs:{model:t.addRow,rules:t.ruleValidate,"label-position":"right","label-width":120}},[a("FormItem",{attrs:{label:"标题",prop:"MsgTitle"}},[a("Input",{staticStyle:{width:"360px"},model:{value:t.addRow.MsgTitle,callback:function(e){t.$set(t.addRow,"MsgTitle",e)},expression:"addRow.MsgTitle"}})],1),a("FormItem",{attrs:{label:"内容",prop:"MsgContent"}},[a("Input",{staticStyle:{width:"360px"},attrs:{type:"textarea",autosize:{minRows:8,maxRows:10},placeholder:"Enter something..."},model:{value:t.addRow.MsgContent,callback:function(e){t.$set(t.addRow,"MsgContent",e)},expression:"addRow.MsgContent"}})],1),a("FormItem",{attrs:{label:"开始时间",prop:"StartTime"}},[a("DatePicker",{staticStyle:{width:"360px"},attrs:{type:"datetime",placeholder:"Select date and time",value:t.addRow.StartTime,format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(e){t.addRow.StartTime=e}}})],1),a("FormItem",{attrs:{label:"结束时间",prop:"EndTime"}},[a("DatePicker",{staticStyle:{width:"360px"},attrs:{type:"datetime",placeholder:"Select date and time",value:t.addRow.EndTime,format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(e){t.addRow.EndTime=e}}})],1),a("FormItem",{attrs:{label:"排序",prop:"OrderNum"}},[a("Input",{staticStyle:{width:"360px"},model:{value:t.addRow.OrderNum,callback:function(e){t.$set(t.addRow,"OrderNum",e)},expression:"addRow.OrderNum"}})],1)],1),a("div",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.toAdd("formValidate")}}},[t._v("保存")])],1)],1),a("Modal",{attrs:{title:"编辑公告信息",width:"600"},model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}},[a("Form",{ref:"editFormValidate",attrs:{model:t.editRow,"label-position":"right","label-width":120}},[a("FormItem",{attrs:{label:"标题",prop:"MsgTitle",rules:{required:!0,message:"请输入标题",trigger:"blur"}}},[a("Input",{staticStyle:{width:"360px"},model:{value:t.editRow.MsgTitle,callback:function(e){t.$set(t.editRow,"MsgTitle",e)},expression:"editRow.MsgTitle"}})],1),a("FormItem",{attrs:{label:"内容",prop:"MsgContent",rules:{required:!0,message:"请输入内容",trigger:"blur"}}},[a("Input",{staticStyle:{width:"360px"},attrs:{type:"textarea",autosize:{minRows:8,maxRows:10},placeholder:"Enter something..."},model:{value:t.editRow.MsgContent,callback:function(e){t.$set(t.editRow,"MsgContent",e)},expression:"editRow.MsgContent"}})],1),a("FormItem",{attrs:{label:"开始时间",prop:"StartTime"}},[a("DatePicker",{staticStyle:{width:"360px"},attrs:{type:"datetime",placeholder:"Select date and time",value:t.editRow.StartTime,format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(e){t.editRow.StartTime=e}}})],1),a("FormItem",{attrs:{label:"结束时间",prop:"EndTime"}},[a("DatePicker",{staticStyle:{width:"360px"},attrs:{type:"datetime",placeholder:"Select date and time",value:t.editRow.EndTime,format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(e){t.editRow.EndTime=e}}})],1),a("FormItem",{attrs:{label:"排序",prop:"OrderNum"}},[a("Input",{staticStyle:{width:"360px"},model:{value:t.editRow.OrderNum,callback:function(e){t.$set(t.editRow,"OrderNum",e)},expression:"editRow.OrderNum"}})],1)],1),a("div",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.toEdit("editFormValidate")}}},[t._v("保存")])],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"title"},[a("span",{staticStyle:{background:"#1abc9c"}},[t._v(" ")]),t._v("\n            推广首页\n        ")])}],i=a("cebc"),n=(a("7f7f"),a("96cf"),a("3b8d")),o=(a("c5f6"),a("2708")),l={mixins:[o["a"]],name:"home",components:{},data:function(){var t=this;return{showAdd:!1,showEdit:!1,modal5:!1,loading:!1,editRow:{},addRow:{StartTime:"",EndTime:""},ruleValidate:{MsgTitle:[{required:!0,message:"标题不能为空!",trigger:"blur"}],MsgContent:[{required:!0,message:"内容不能为空!",trigger:"blur"}],StartTime:[{required:!0,message:"请选择开始时间!",trigger:"change"}],EndTime:[{required:!0,message:"请选择结束时间!",trigger:"change"}],OrderNum:[{required:!0,message:"请填写排序数字! ",trigger:"blur"},{type:"number",message:"请输入合法的数字!",trigger:"blur",transform:function(t){return Number(t)}}]},moreLoading:!1,arrTitles:[],arrDatas:[],page:1,per_page:20,title:"",content:"",columns:[{title:"标题",key:"MsgTitle",width:700,render:function(e,a){return e("div",[e("a",{class:"mouse-on",on:{click:function(){t.title=a.row.MsgTitle,t.content=a.row.MsgContent,t.modal5=!0}}},a.row.MsgTitle)])}},{title:"date",key:"StartTime",width:270,render:function(t,e){return t("div",e.row.StartTime+" - "+e.row.EndTime)}},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"error",icon:"compose",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showEditModal(a.index)}}},"编辑")])}}],tableDatas:[]}},computed:{},mounted:function(){this.init()},methods:{init:function(){this.page=1,this.per_page=10,this.getStatics(),this.getMessage()},getStatics:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,e={},t.next=5,this.$store.dispatch("getPromoStatics",e);case 5:a=t.sent,a&&a.data&&(r=a.data,r.arrTitles&&r.arrTitles.arrString&&r.arrTitles.arrString.length&&(this.arrTitles=r.arrTitles.arrString),r.arrTitles&&r.arrDatas&&r.arrDatas.length&&r.arrDatas[0].arrString&&(this.arrDatas=r.arrDatas[0].arrString)),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:this.loading=!1;case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),getMessage:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,r,s,i,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.moreLoading=!0,e=(this.page-1)*this.per_page,a=this.page*this.per_page,r={page:this.page,per_page:this.per_page,minIndex:e,maxIndex:a>this.total&&this.total?this.total:a},t.next=7,this.$store.dispatch("getAgentMessage",r);case 7:s=t.sent,i=this.handleResult(s),i.tableDatas.forEach(function(t){n.tableDatas.push(t)}),this.total=i.total,t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](0);case 15:this.moreLoading=!1;case 16:case"end":return t.stop()}},t,this,[[0,13]])}));function e(){return t.apply(this,arguments)}return e}(),toLoading:function(){this.init()},queryMore:function(){this.page+=1,this.getMessage()},cancel:function(){this.showAdd=!1,this.showEdit=!1},showAddModal:function(){this.showAdd=!0},toAdd:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.add(e.addRow)})},add:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("insertAgentMessage",e);case 4:a=t.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.showAdd=!1,this.$Message.success("添加成功!"),this.init()),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:this.loading=!1;case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}(),showEditModal:function(t){this.showEdit=!0,this.editRow=Object(i["a"])({},this.tableDatas[t]),this.editRow.StartTime=this.editRow.StartTime.length<=10?this.editRow.StartTime+" 00:00:00":this.editRow.StartTime,this.editRow.EndTime=this.editRow.EndTime.length<=10?this.editRow.EndTime+" 00:00:00":this.editRow.EndTime,this.editRow.OrderNum=1,console.log(this.editRow)},toEdit:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.saveEdit(e.editRow)})},saveEdit:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("updateAgentMessage",e);case 4:a=t.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.showEdit=!1,this.$Message.success("修改成功!"),this.init()),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:this.loading=!1;case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}()}},d=l,c=(a("09d9"),a("4ed5"),a("2877")),u=Object(c["a"])(d,r,s,!1,null,"7ebdfe8a",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-05d1ece2.a35a5af7.js.map