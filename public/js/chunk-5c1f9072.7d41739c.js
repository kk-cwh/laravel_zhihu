(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c1f9072"],{"12cd":function(t,e,a){},2708:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var s={methods:{handleResult:function(t,e){var a={arrKeys:[],arrTitles:[],tableDatas:[],total:0};if(t&&t.data){var s=t.data;if(s.arrTitles&&s.arrTitles.arrString&&s.arrTitles.arrString.length&&(a.arrTitles=s.arrTitles.arrString),s.arrKeys&&s.arrKeys.arrString&&s.arrKeys.arrString.length&&(a.arrKeys=s.arrKeys.arrString),a.arrKeys.length||(a.arrKeys=a.arrTitles),e||(e=a.arrKeys),s.arrDatas&&s.arrDatas.length)for(var r=0;r<s.arrDatas.length;r++){for(var i={},n=0;n<e.length;n++)i[e[n]]=s.arrDatas[r].arrString[n];a.tableDatas.push(i)}a.total=s.nTotal?s.nTotal:0}return a},IUDSuccess:function(t){return!(t&&t.data&&t.data.hasOwnProperty("result")&&1===t.data.result)},exportData:function(t,e){this.$refs[t].exportCsv({filename:e})}}}},4444:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{attrs:{"label-position":"right","label-width":70,inline:""}},[a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",icon:"plus"},on:{click:t.showAddModal}},[t._v("新增")])],1),a("FormItem",{attrs:{label:"状态:"}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.query.state,callback:function(e){t.$set(t.query,"state",e)},expression:"query.state"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),t._l(t.stateObj,function(e,s){return a("Option",{key:s,attrs:{value:s}},[t._v(t._s(e))])})],2)],1),a("FormItem",{attrs:{label:"代理ID:"}},[a("Input",{attrs:{clearable:"",type:"text",placeholder:"填写代理ID"},model:{value:t.query.AgencyID,callback:function(e){t.$set(t.query,"AgencyID",e)},expression:"query.AgencyID"}})],1),a("FormItem",{attrs:{label:"展示名字:"}},[a("Input",{attrs:{clearable:"",type:"text",placeholder:"填写展示名字"},model:{value:t.query.nickname,callback:function(e){t.$set(t.query,"nickname",e)},expression:"query.nickname"}})],1),a("FormItem",{attrs:{label:"类型:"}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.query.ntype,callback:function(e){t.$set(t.query,"ntype",e)},expression:"query.ntype"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),t._l(t.ntypeObj,function(e,s){return a("Option",{key:s,attrs:{value:s}},[t._v(t._s(e))])})],2)],1),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",loading:t.queryLoading,icon:"ios-search"},on:{click:t.toQuery}},[t._v("查询")])],1)],1),a("Table",{ref:"selection",attrs:{loading:t.queryLoading,border:"",columns:t.columns,data:t.tableDatas,stripe:""},on:{"on-sort-change":t.sortChange}}),a("Page",{staticClass:"margin-top-10",attrs:{total:t.total,"page-size-opts":[20,50,100],current:t.page,"class-name":"margin-top-10",size:"small","show-total":"","show-elevator":"","show-sizer":"","page-size":20},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.pageChange}}),a("Modal",{attrs:{title:"添加商人展示信息",width:"480"},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[a("Form",{ref:"formValidate",attrs:{model:t.addRow,rules:t.ruleValidate,"label-position":"right","label-width":140}},[a("FormItem",{attrs:{label:"展示名字",prop:"nickname"}},[a("Input",{staticStyle:{width:"200px"},model:{value:t.addRow.nickname,callback:function(e){t.$set(t.addRow,"nickname",e)},expression:"addRow.nickname"}})],1),a("FormItem",{attrs:{label:"类型",prop:"ntype"}},[a("RadioGroup",{model:{value:t.addRow.ntype,callback:function(e){t.$set(t.addRow,"ntype",e)},expression:"addRow.ntype"}},[a("Radio",{attrs:{label:"qq"}},[t._v("QQ")]),a("Radio",{attrs:{label:"wx"}},[t._v("微信")])],1)],1),a("FormItem",{attrs:{label:"号码",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:t.addRowTypeTips},model:{value:t.addRow.name,callback:function(e){t.$set(t.addRow,"name",e)},expression:"addRow.name"}})],1)],1),a("div",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.toAdd("formValidate")}}},[t._v("保存")])],1)],1),a("Modal",{attrs:{title:"修改商人展示信息",width:"480"},model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}},[a("Form",{ref:"editFormValidate",attrs:{model:t.editRow,"label-position":"right","label-width":140}},[a("FormItem",{attrs:{label:"展示名字",prop:"nickname",rules:{required:!0,message:"请输入展示名字！",trigger:"blur"}}},[a("Input",{staticStyle:{width:"200px"},model:{value:t.editRow.nickname,callback:function(e){t.$set(t.editRow,"nickname",e)},expression:"editRow.nickname"}})],1),a("FormItem",{attrs:{label:"类型",prop:"ntype",rules:{required:!0,message:"请选择类型！",trigger:"blur"}}},[a("RadioGroup",{model:{value:t.editRow.ntype,callback:function(e){t.$set(t.editRow,"ntype",e)},expression:"editRow.ntype"}},[a("Radio",{attrs:{label:"qq"}},[t._v("QQ")]),a("Radio",{attrs:{label:"wx"}},[t._v("微信")])],1)],1),a("FormItem",{attrs:{label:"号码",prop:"name",rules:{required:!0,message:"请输入号码！",trigger:"blur"}}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:t.editRowTypeTips},model:{value:t.editRow.name,callback:function(e){t.$set(t.editRow,"name",e)},expression:"editRow.name"}})],1),a("FormItem",{attrs:{label:"状态",prop:"state",rules:{required:!0,message:"请选择状态！",trigger:"blur"}}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.editRow.state,callback:function(e){t.$set(t.editRow,"state",e)},expression:"editRow.state"}},[a("Option",{attrs:{value:"0"}},[t._v("禁用")]),a("Option",{attrs:{value:"1"}},[t._v("启用")])],1)],1),a("FormItem",{attrs:{label:"归属代理ID",prop:"BelondAG",rules:[{required:!0,message:"请输入归属代理ID！",trigger:"blur"},{type:"number",message:"请输入合法的数字!",trigger:"blur",transform:function(t){return Number(t)}}]}},[a("Input",{staticStyle:{width:"200px"},model:{value:t.editRow.BelondAG,callback:function(e){t.$set(t.editRow,"BelondAG",e)},expression:"editRow.BelondAG"}})],1)],1),a("div",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.toEdit("editFormValidate")}}},[t._v("确定")])],1)],1)],1)},r=[],i=(a("7f7f"),a("cebc")),n=(a("96cf"),a("3b8d")),o=a("2708"),l={mixins:[o["a"]],data:function(){return{queryLoading:!1,btTypes:["","","",""],loading:!1,ntypeObj:{qq:"QQ",wx:"微信"},stateObj:{0:"禁用",1:"启用"},query:{ntype:""},datasTime:[],page:1,per_page:20,total:0,showEdit:!1,showAdd:!1,addRow:{ntype:"qq"},editRow:{},columns:[],tableDatas:[],ruleValidate:{ntype:[{required:!0,message:"类型不能为空！",trigger:"blur"}],nickname:[{required:!0,message:"展示名字不能为空！",trigger:"blur"}],name:[{required:!0,message:"请填写号码！",trigger:"blur"}]}}},mounted:function(){},computed:{addRowTypeTips:function(){return"qq"===this.addRow.ntype?"请填写QQ号":"请填写微信号"},editRowTypeTips:function(){return"qq"===this.editRow.ntype?"请填写QQ号":"请填写微信号"}},methods:{init:function(){this.queryList()},sortChange:function(t){this.query.order_by=t.key+" "+t.order,this.queryList()},pickerChange:function(t,e){this.datasTime=t,this.clearDate()},clearDate:function(){this.btTypes=["","","",""]},changeDate:function(t){this.datasTime=[];var e=new Date,a=new Date;-1===t&&(this.btTypes=["","","","success"],e.setDate(e.getDate()-1),a.setDate(a.getDate()-1),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),1===t&&(this.btTypes=["success","","",""],this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),7===t&&(this.btTypes=["","success","",""],e.setDate(e.getDate()-6),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),30===t&&(this.btTypes=["","","success",""],e.setDate(e.getDate()-29),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)])},getDateFormate:function(t){return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()},pageChange:function(t){this.page=t,this.queryList()},pageSizeChange:function(t){this.per_page!==t&&(this.per_page=t,this.queryList())},queryList:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,s,r,n,o,l,c,u,d=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.queryLoading=!0,e=(this.page-1)*this.per_page,a=this.page*this.per_page,s=Object(i["a"])({page:this.page,per_page:this.per_page,minIndex:e,maxIndex:a>this.total&&this.total&&this.page>1?this.total:a},this.query,{start_time:this.datasTime.length>0&&this.datasTime[0]?this.datasTime[0]:"",end_time:this.datasTime.length>1&&this.datasTime[1]?this.datasTime[1]+" 23:59:59":""}),t.next=7,this.$store.dispatch("getMerchantSetting",s);case 7:for(r=t.sent,n=this.handleResult(r),this.columns=[],o=n.arrTitles,l=n.arrKeys,c=0;c<l.length;c++)u={title:o[c],sortable:"custom",minWidth:120,key:l[c]},"state"===u.key&&(u.render=function(t,e){return t("span",d.stateObj[e.row.state])}),this.columns.push(u);this.columns.push({title:"操作",key:"action",align:"center",width:160,render:function(t,e){return t("div",[t("Button",{props:{type:"success",icon:"compose",size:"small"},style:{marginRight:"2px"},on:{click:function(){d.showEditModal(e.index)}}},"编辑")])}}),this.tableDatas=n.tableDatas,this.total=n.total,t.next=20;break;case 18:t.prev=18,t.t0=t["catch"](0);case 20:this.queryLoading=!1;case 21:case"end":return t.stop()}},t,this,[[0,18]])}));function e(){return t.apply(this,arguments)}return e}(),toQuery:function(){this.page=1,this.queryList()},handleReset:function(t){this.$refs[t].resetFields()},cancel:function(){this.showEdit=!1,this.showAdd=!1},showAddModal:function(){this.showAdd=!0,this.handleReset("formValidate")},toAdd:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.add(e.addRow)})},add:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("insertMerchantSetting",e);case 4:a=t.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.showAdd=!1,this.$Message.success("添加成功!"),this.toQuery()),this.loading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),s=t.t0.response,s&&(401===s.status&&this.$Message.error("你没有权限!"),500===s.status&&this.$Message.error("系统繁忙，请稍后再试!"));case 13:case"end":return t.stop()}},t,this,[[0,9]])}));function e(e){return t.apply(this,arguments)}return e}(),showEditModal:function(t){this.showEdit=!0,this.editRow=Object(i["a"])({},this.tableDatas[t])},toEdit:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.saveEdit(e.editRow)})},saveEdit:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("updateMerchantSetting",e);case 4:a=t.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.showEdit=!1,this.$Message.success("修改成功!"),this.toQuery()),this.loading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),s=t.t0.response,s&&(401===s.status&&this.$Message.error("你没有权限!"),500===s.status&&this.$Message.error("系统繁忙，请稍后再试!"));case 13:case"end":return t.stop()}},t,this,[[0,9]])}));function e(e){return t.apply(this,arguments)}return e}(),toDelete:function(t){this.delRow=Object(i["a"])({},this.tableDatas[t]);var e={AccountName:this.delRow.AccountName};this.deleteRow(e)},deleteRow:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("deleteMerchantSetting",e);case 4:a=t.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.showEdit=!1,this.$Message.success("删除成功!"),this.toQuery()),this.loading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),s=t.t0.response,s&&(401===s.status&&this.$Message.error("你没有权限!"),500===s.status&&this.$Message.error("系统繁忙，请稍后再试!"));case 13:case"end":return t.stop()}},t,this,[[0,9]])}));function e(e){return t.apply(this,arguments)}return e}()}},c=l,u=(a("5a8e"),a("2877")),d=Object(u["a"])(c,s,r,!1,null,"c6d1768c",null);e["default"]=d.exports},"5a8e":function(t,e,a){"use strict";var s=a("12cd"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-5c1f9072.7d41739c.js.map