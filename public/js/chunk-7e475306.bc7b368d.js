(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e475306"],{1111:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{attrs:{"label-position":"right","label-width":70,inline:""}},[a("FormItem",{attrs:{label:"ID:"}},[a("Input",{attrs:{clearable:"",type:"text",placeholder:"填写玩家ID"},model:{value:e.query.UserId,callback:function(t){e.$set(e.query,"UserId",t)},expression:"query.UserId"}})],1),a("FormItem",{attrs:{label:"玩家昵称:"}},[a("Input",{attrs:{clearable:"",type:"text",placeholder:"填写玩家昵称"},model:{value:e.query.NickName,callback:function(t){e.$set(e.query,"NickName",t)},expression:"query.NickName"}})],1),a("FormItem",{attrs:{label:"游戏类别:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.query.game_type,callback:function(t){e.$set(e.query,"game_type",t)},expression:"query.game_type"}},e._l(e.game_types,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("FormItem",{attrs:{label:"房间:"}},[a("i-select",{staticStyle:{width:"100px"},attrs:{placement:"bottom",transfer:"",clearable:"",filterable:""},model:{value:e.query.RoomName,callback:function(t){e.$set(e.query,"RoomName",t)},expression:"query.RoomName"}},e._l(e.room_names,function(t){return a("i-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("FormItem",{attrs:{label:"时间选择:"}},[a("Button",{attrs:{type:e.btTypes[3],size:"small"},on:{click:function(t){return e.changeDate(-1)}}},[e._v("昨天")]),a("Button",{attrs:{type:e.btTypes[0],size:"small"},on:{click:function(t){return e.changeDate(1)}}},[e._v("今天")]),a("Button",{attrs:{type:e.btTypes[1],size:"small"},on:{click:function(t){return e.changeDate(7)}}},[e._v("近一周")]),a("Button",{attrs:{type:e.btTypes[2],size:"small"},on:{click:function(t){return e.changeDate(30)}}},[e._v("近一月")]),a("DatePicker",{staticStyle:{width:"200px"},attrs:{value:e.datasTime,format:"yyyy/MM/dd",type:"daterange",clearable:"",placement:"bottom-end",placeholder:"Select date"},on:{"on-change":e.pickerChange,"on-clear":e.clearDate}})],1),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",loading:e.queryLoading,icon:"ios-search"},on:{click:e.toQuery}},[e._v("查询")])],1),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"success",loading:e.qxLoading,icon:"arrow-graph-up-right"},on:{click:e.toQueryAGGoldDetail}},[e._v("查询玩家曲线")])],1)],1),a("Table",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],ref:"selection",attrs:{loading:e.queryLoading,border:"",columns:e.columns,data:e.tableDatas,stripe:""},on:{"on-sort-change":e.sortChange}}),a("Page",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],staticClass:"margin-top-10",attrs:{total:e.total,"page-size-opts":[20,50,100],current:e.page,"class-name":"margin-top-10",size:"small","show-total":"","show-elevator":"","show-sizer":"","page-size":20},on:{"on-page-size-change":e.pageSizeChange,"on-change":e.pageChange}}),a("Modal",{staticClass:"demo-tabs-style1",attrs:{width:"720",title:"游戏信息",transfer:!1},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[a("Table",{ref:"selection",attrs:{size:"small",loading:e.gameLoading,border:"",columns:e.gameColumns,data:e.gameTableDatas,stripe:""}}),a("Page",{staticClass:"margin-top-10",attrs:{total:e.gTotal,"page-size-opts":[20,50,100],current:e.gPage,"class-name":"margin-top-10",size:"small","show-total":"","show-elevator":"","show-sizer":"","page-size":20},on:{"on-page-size-change":e.gpageSizeChange,"on-change":e.gpageChange}}),a("div",{staticStyle:{color:"#f60","text-align":"right"},attrs:{slot:"footer"},slot:"footer"})],1),a("ve-line",{directives:[{name:"show",rawName:"v-show",value:!e.showTable,expression:"!showTable"}],attrs:{data:e.chartData}})],1)},r=[],i=a("cebc"),n=(a("96cf"),a("3b8d")),l=a("2708"),o={mixins:[l["a"]],data:function(){return{showTable:!1,qxLoading:!1,queryLoading:!1,gameLoading:!1,btTypes:["","","",""],game_types:[{label:"红黑大战",value:"红黑大战"},{label:"百家乐",value:"百家乐"},{label:"摇一摇",value:"摇一摇"},{label:"百人牛牛",value:"百人牛牛"},{label:"豪车俱乐部",value:"豪车俱乐部"},{label:"斗地主",value:"斗地主"},{label:"二人麻将",value:"二人麻将"},{label:"捕鱼",value:"神龙出海"},{label:"神兽转盘",value:"神兽转盘"},{label:"水果机",value:"水果机"},{label:"四人牛牛",value:"四人牛牛"},{label:"拼三张",value:"拼三张"},{label:"十三张",value:"十三张"},{label:"财神红包",value:"财神红包"},{label:"扫雷红包",value:"扫雷红包"}],room_names:[{label:"新手房",value:"新手房"},{label:"初级房",value:"初级房"},{label:"高级场",value:"高级场"},{label:"富豪场",value:"富豪场"},{label:"约战房",value:"约战房"}],loading:!1,query:{},datasTime:[],page:1,per_page:20,total:0,showEdit:!1,showAdd:!1,addRow:{},editRow:{},columns:[],tableDatas:[],gPage:1,g_per_page:20,gTotal:0,GameID:"",gameTableDatas:[],gameColumns:[],chartData:{}}},mounted:function(){},computed:{},methods:{setQuery:function(e){this.query.RoomName=e},init:function(){this.queryList()},sortChange:function(e){this.query.order_by=e.key+" "+e.order,this.queryList()},pickerChange:function(e,t){this.datasTime=e,this.clearDate()},clearDate:function(){this.btTypes=["","","",""]},changeDate:function(e){this.datasTime=[];var t=new Date,a=new Date;-1===e&&(this.btTypes=["","","","success"],t.setDate(t.getDate()-1),a.setDate(a.getDate()-1),this.datasTime=[this.getDateFormate(t),this.getDateFormate(a)]),1===e&&(this.btTypes=["success","","",""],this.datasTime=[this.getDateFormate(t),this.getDateFormate(a)]),7===e&&(this.btTypes=["","success","",""],t.setDate(t.getDate()-6),this.datasTime=[this.getDateFormate(t),this.getDateFormate(a)]),30===e&&(this.btTypes=["","","success",""],t.setDate(t.getDate()-29),this.datasTime=[this.getDateFormate(t),this.getDateFormate(a)])},getDateFormate:function(e){return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()},pageChange:function(e){this.page=e,this.queryList()},pageSizeChange:function(e){this.per_page!==e&&(this.per_page=e,this.queryList())},toQueryAGGoldDetail:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.query.UserId){e.next=3;break}return this.$Message.error("请输入玩家ID！"),e.abrupt("return",!1);case 3:return this.showTable=!1,e.prev=4,this.qxLoading=!0,t=Object(i["a"])({},this.query,{start_time:this.datasTime.length>0&&this.datasTime[0]?this.datasTime[0]:"",end_time:this.datasTime.length>1&&this.datasTime[1]?this.datasTime[1]+" 23:59:59":""}),this.chartData={columns:["index","金币"],rows:[]},t.hasOwnProperty("order_by")&&(t.order_by=""),e.next=11,this.$store.dispatch("getAGGoldDetail",t);case 11:a=e.sent,s=this.handleResult(a),s&&s.tableDatas&&s.tableDatas.length&&(this.chartData={columns:["index","金币"],rows:s.tableDatas.map(function(e,t){return{index:t,"金币":e.CurGold}})}),e.next=18;break;case 16:e.prev=16,e.t0=e["catch"](4);case 18:this.qxLoading=!1;case 19:case"end":return e.stop()}},e,this,[[4,16]])}));function t(){return e.apply(this,arguments)}return t}(),queryList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s,r,n,l,o,h,u,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.queryLoading=!0,t=(this.page-1)*this.per_page,a=this.page*this.per_page,s=Object(i["a"])({page:this.page,per_page:this.per_page,minIndex:t,maxIndex:a>this.total&&this.total&&this.page>1?this.total:a},this.query,{start_time:this.datasTime.length>0&&this.datasTime[0]?this.datasTime[0]:"",end_time:this.datasTime.length>1&&this.datasTime[1]?this.datasTime[1]+" 23:59:59":""}),e.next=7,this.$store.dispatch("getGameLogs",s);case 7:for(r=e.sent,n=this.handleResult(r),this.columns=[],l=n.arrTitles,o=n.arrKeys,h=0;h<o.length;h++)u={title:l[h],sortable:"custom",minWidth:120,key:o[h]},"AddGold"===u.key&&(u.render=function(e,t){return e("div",[e("span",{style:{color:t.row.AddGold<=0?"#ed3f14":"#19be6b"}},t.row.AddGold)])}),"GameID"===u.key&&(u.render=function(e,t){return e("div",[e("a",{style:{},on:{click:function(){c.showEditModal(t.index)}}},c.tableDatas[t.index].GameID)])}),this.columns.push(u);this.tableDatas=n.tableDatas,this.total=n.total,e.next=19;break;case 17:e.prev=17,e.t0=e["catch"](0);case 19:this.queryLoading=!1;case 20:case"end":return e.stop()}},e,this,[[0,17]])}));function t(){return e.apply(this,arguments)}return t}(),toQuery:function(){this.page=1,this.showTable=!0,this.queryList()},gpageChange:function(e){this.gPage=e,this.queryGameList()},gpageSizeChange:function(e){this.g_per_page!==e&&(this.g_per_page=e,this.queryGameList())},showEditModal:function(e){this.showEdit=!0,this.GameID=this.tableDatas[e].GameID,this.queryGameList()},queryGameList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s,r,i,n,l,o,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.gameLoading=!0,t=(this.gPage-1)*this.g_per_page,a=this.gPage*this.g_per_page,s={GameID:this.GameID,page:this.gPage,per_page:this.g_per_page,minIndex:t,maxIndex:a>this.gTotal&&this.gTotal&&this.gPage>1?this.gTotal:a},e.next=7,this.$store.dispatch("getGameLogs",s);case 7:for(r=e.sent,i=this.handleResult(r),this.gameColumns=[],n=i.arrTitles,l=i.arrKeys,o=0;o<l.length;o++)h={title:n[o],sortable:"custom",minWidth:120,key:l[o]},this.gameColumns.push(h);this.gameTableDatas=i.tableDatas,this.gTotal=i.total,e.next=19;break;case 17:e.prev=17,e.t0=e["catch"](0);case 19:this.gameLoading=!1;case 20:case"end":return e.stop()}},e,this,[[0,17]])}));function t(){return e.apply(this,arguments)}return t}()}},h=o,u=(a("a9be"),a("2877")),c=Object(u["a"])(h,s,r,!1,null,"374cd737",null);t["default"]=c.exports},2708:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var s={methods:{handleResult:function(e,t){var a={arrKeys:[],arrTitles:[],tableDatas:[],total:0};if(e&&e.data){var s=e.data;if(s.arrTitles&&s.arrTitles.arrString&&s.arrTitles.arrString.length&&(a.arrTitles=s.arrTitles.arrString),s.arrKeys&&s.arrKeys.arrString&&s.arrKeys.arrString.length&&(a.arrKeys=s.arrKeys.arrString),a.arrKeys.length||(a.arrKeys=a.arrTitles),t||(t=a.arrKeys),s.arrDatas&&s.arrDatas.length)for(var r=0;r<s.arrDatas.length;r++){for(var i={},n=0;n<t.length;n++)i[t[n]]=s.arrDatas[r].arrString[n];a.tableDatas.push(i)}a.total=s.nTotal?s.nTotal:0}return a},IUDSuccess:function(e){return!(e&&e.data&&e.data.hasOwnProperty("result")&&1===e.data.result)},exportData:function(e,t){this.$refs[e].exportCsv({filename:t})}}}},a451:function(e,t,a){},a9be:function(e,t,a){"use strict";var s=a("a451"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-7e475306.bc7b368d.js.map