(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b0514e46"],{"06db":function(t,e,a){"use strict";var r=a("23c6"),s={};s[a("2b4c")("toStringTag")]="z",s+""!="[object z]"&&a("2aba")(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},"1c04":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{attrs:{"label-position":"right","label-width":70,inline:""}},[a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",icon:"plus"},on:{click:t.showAddModal}},[t._v("新增")])],1),a("FormItem",{attrs:{label:"账号:"}},[a("Input",{attrs:{clearable:"",type:"text",placeholder:"填写账号"},model:{value:t.query.AccountName,callback:function(e){t.$set(t.query,"AccountName",e)},expression:"query.AccountName"}})],1),a("FormItem",{attrs:{label:"昵称:"}},[a("Input",{attrs:{clearable:"",type:"text",placeholder:"填写用户昵称"},model:{value:t.query.NickName,callback:function(e){t.$set(t.query,"NickName",e)},expression:"query.NickName"}})],1),a("FormItem",{attrs:{label:"创建时间:"}},[a("Button",{attrs:{type:t.btTypes[3],size:"small"},on:{click:function(e){return t.changeDate(-1)}}},[t._v("昨天")]),a("Button",{attrs:{type:t.btTypes[0],size:"small"},on:{click:function(e){return t.changeDate(1)}}},[t._v("今天")]),a("Button",{attrs:{type:t.btTypes[1],size:"small"},on:{click:function(e){return t.changeDate(7)}}},[t._v("近一周")]),a("Button",{attrs:{type:t.btTypes[2],size:"small"},on:{click:function(e){return t.changeDate(30)}}},[t._v("近一月")]),a("DatePicker",{staticStyle:{width:"200px"},attrs:{value:t.datasTime,format:"yyyy/MM/dd",type:"daterange",clearable:"",placement:"bottom-end",placeholder:"Select date"},on:{"on-change":t.pickerChange,"on-clear":t.clearDate}})],1),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",loading:t.queryLoading,icon:"ios-search"},on:{click:t.toQuery}},[t._v("查询")])],1)],1),a("Table",{ref:"selection",attrs:{loading:t.queryLoading,border:"",columns:t.columns,data:t.tableDatas,stripe:""},on:{"on-sort-change":t.sortChange}}),a("Page",{staticClass:"margin-top-10",attrs:{total:t.total,"page-size-opts":[20,50,100],current:t.page,"class-name":"margin-top-10",size:"small","show-total":"","show-elevator":"","show-sizer":"","page-size":20},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.pageChange}}),a("Modal",{attrs:{title:"新增管理账号",width:"480"},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[a("Form",{ref:"formValidate",attrs:{model:t.addRow,rules:t.ruleValidate,"label-position":"right","label-width":140}},[a("FormItem",{attrs:{label:"账号",prop:"AccountName"}},[a("Input",{staticStyle:{width:"200px"},model:{value:t.addRow.AccountName,callback:function(e){t.$set(t.addRow,"AccountName",e)},expression:"addRow.AccountName"}})],1),a("FormItem",{attrs:{label:"昵称",prop:"NickName"}},[a("Input",{staticStyle:{width:"200px"},model:{value:t.addRow.NickName,callback:function(e){t.$set(t.addRow,"NickName",e)},expression:"addRow.NickName"}})],1),a("FormItem",{attrs:{label:"密码",prop:"Pwd"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:t.addRow.Pwd,callback:function(e){t.$set(t.addRow,"Pwd",e)},expression:"addRow.Pwd"}})],1),a("FormItem",{attrs:{label:"确认密码",prop:"Pwd_confirm"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:t.addRow.Pwd_confirm,callback:function(e){t.$set(t.addRow,"Pwd_confirm",e)},expression:"addRow.Pwd_confirm"}})],1),a("FormItem",{attrs:{label:"角色",prop:"RoleLevel"}},[a("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.addRow.RoleLevel,callback:function(e){t.$set(t.addRow,"RoleLevel",e)},expression:"addRow.RoleLevel"}},t._l(t.roleLevelTypes,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)],1),a("div",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.toAdd("formValidate")}}},[t._v("保存")])],1)],1),a("Modal",{attrs:{title:"编辑管理账号",width:"480"},model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}},[a("Form",{ref:"editFormValidate",attrs:{model:t.editRow,"label-position":"right","label-width":140}},[a("FormItem",{attrs:{label:"账号",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.editRow.AccountName,callback:function(e){t.$set(t.editRow,"AccountName",e)},expression:"editRow.AccountName"}})],1),a("FormItem",{attrs:{label:"昵称",prop:"NickName",rules:{required:!0,message:"请输入昵称",trigger:"blur"}}},[a("Input",{staticStyle:{width:"200px"},model:{value:t.editRow.NickName,callback:function(e){t.$set(t.editRow,"NickName",e)},expression:"editRow.NickName"}})],1),a("FormItem",{attrs:{label:"RoleLevel",prop:"RoleLevel",rules:{required:!0,message:"请选择角色!",trigger:"blur"}}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.editRow.RoleLevel,callback:function(e){t.$set(t.editRow,"RoleLevel",e)},expression:"editRow.RoleLevel"}},t._l(t.roleLevelTypes,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"状态",prop:"Status",rules:{required:!0,message:"请选择状态！",trigger:"blur"}}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.editRow.Status,callback:function(e){t.$set(t.editRow,"Status",e)},expression:"editRow.Status"}},t._l(t.statusObj,function(e,r){return a("Option",{key:e,attrs:{value:r}},[t._v(t._s(e))])}),1)],1),a("FormItem",{attrs:{label:"重置密码",prop:"Pwd"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"password",placeholder:"填写新密码！不填不会重置",clearable:""},model:{value:t.editRow.Pwd,callback:function(e){t.$set(t.editRow,"Pwd",e)},expression:"editRow.Pwd"}})],1)],1),a("div",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.toEdit("editFormValidate")}}},[t._v("确定")])],1)],1)],1)},s=[],i=(a("7f7f"),a("cebc")),n=(a("96cf"),a("3b8d")),o=(a("6b54"),a("06db"),a("2708")),l={mixins:[o["a"]],data:function(){var t=this,e=function(e,a,r){""===a||""===a.toString().trim()?r(new Error("请输入密码！")):(""!==t.addRow.Pwd_confirm&&t.$refs.formValidate.validateField("Pwd_confirm"),r())},a=function(e,a,r){""===a||""===a.toString().trim()?r(new Error("请再次输入密码！")):a!==t.addRow.Pwd?r(new Error("两次密码输入不一致!")):r()};return{queryLoading:!1,btTypes:["","","",""],statusObj:{1:"启用",0:"禁用"},roleLevelTypes:[{label:"管理员",value:"0"},{label:"运营客服",value:"1"},{label:"运营",value:"10"},{label:"普通客服",value:"100"},{label:"审核客服",value:"1000"},{label:"客服主管",value:"999"}],loading:!1,query:{},datasTime:[],page:1,per_page:20,total:0,showEdit:!1,showAdd:!1,addRow:{},editRow:{},delRow:{},columns:[],tableDatas:[],ruleValidate:{AccountName:[{required:!0,message:"账号不能为空！",trigger:"blur"}],NickName:[{required:!0,message:"昵称不能为空！",trigger:"blur"}],Pwd:[{required:!0,message:"请输入密码！",trigger:"blur"},{validator:e,trigger:"change"}],Pwd_confirm:[{required:!0,message:"请再次输入密码！",trigger:"blur"},{validator:a,trigger:"change"}],RoleLevel:[{required:!0,message:"请选择角色！ ",trigger:"blur"}]}}},mounted:function(){},computed:{},methods:{init:function(){this.queryList()},sortChange:function(t){this.query.order_by=t.key+" "+t.order,this.queryList()},pickerChange:function(t,e){this.datasTime=t,this.clearDate()},clearDate:function(){this.btTypes=["","","",""]},changeDate:function(t){this.datasTime=[];var e=new Date,a=new Date;-1===t&&(this.btTypes=["","","","success"],e.setDate(e.getDate()-1),a.setDate(a.getDate()-1),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),1===t&&(this.btTypes=["success","","",""],this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),7===t&&(this.btTypes=["","success","",""],e.setDate(e.getDate()-6),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),30===t&&(this.btTypes=["","","success",""],e.setDate(e.getDate()-29),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)])},getDateFormate:function(t){return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()},pageChange:function(t){this.page=t,this.queryList()},pageSizeChange:function(t){this.per_page!==t&&(this.per_page=t,this.queryList())},queryList:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,r,s,n,o,l,c,u,d,h=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.queryLoading=!0,e=(this.page-1)*this.per_page,a=this.page*this.per_page,r=Object(i["a"])({page:this.page,per_page:this.per_page,minIndex:e,maxIndex:a>this.total&&this.total&&this.page>1?this.total:a},this.query,{start_time:this.datasTime.length>0&&this.datasTime[0]?this.datasTime[0]:"",end_time:this.datasTime.length>1&&this.datasTime[1]?this.datasTime[1]+" 23:59:59":""}),t.next=7,this.$store.dispatch("getGMAccountList",r);case 7:for(s=t.sent,n=this.handleResult(s),this.columns=[],o=n.arrTitles,l=n.arrKeys,c=0;c<l.length;c++)u={title:o[c],sortable:"custom",minWidth:120,align:"center",key:l[c]},"Status"===u.key&&(u.render=function(t,e){return t("span",h.statusObj[e.row.Status])}),"RoleLevel"===u.key&&(u.render=function(t,e){return t("span",h.getRoleLevelName(e.row.RoleLevel))}),this.columns.push(u);this.columns.push({title:"操作",key:"action",align:"center",width:190,render:function(t,e){return t("div",[t("Button",{props:{type:"success",icon:"compose",size:"small"},style:{marginRight:"2px"},on:{click:function(){h.showEditModal(e.index)}}},"编辑"),t("Poptip",{props:{confirm:!0,title:"您确认重置谷歌验证码吗？"},style:{textAlign:"left"},on:{"on-ok":function(){h.toResetGoogle(e.index)},"on-cancel":function(){}}},[t("Button",{props:{type:"error",size:"small"}},"重置谷歌验证")])])}}),this.tableDatas=n.tableDatas,this.total=n.total,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](0),d=t.t0.response,d&&(401===d.status&&this.$Message.error("你没有权限!"),500===d.status&&this.$Message.error("系统繁忙，请稍后再试!"));case 22:this.queryLoading=!1;case 23:case"end":return t.stop()}},t,this,[[0,18]])}));function e(){return t.apply(this,arguments)}return e}(),getRoleLevelName:function(t){return 1===t||"1"===t?"运营客服":t>=0&&t<=9?"管理员":t>=10&&t<=99?"运营":100===t||"100"===t?"普通客服":999===t||"999"===t?"客服主管":1e3===t||"1000"===t?"审核客服":"未知"},toQuery:function(){this.page=1,this.queryList()},handleReset:function(t){this.$refs[t].resetFields()},cancel:function(){this.showEdit=!1,this.showAdd=!1},showAddModal:function(){this.showAdd=!0,this.handleReset("formValidate"),this.addRow={}},toAdd:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.add(e.addRow)})},add:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("insertGMAccount",e);case 4:a=t.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.showAdd=!1,this.$Message.success("添加成功!"),this.toQuery()),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:this.loading=!1;case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}(),showEditModal:function(t){this.showEdit=!0,this.editRow={AccountName:this.tableDatas[t].AccountName,NickName:this.tableDatas[t].NickName,RoleLevel:this.tableDatas[t].RoleLevel,Status:this.tableDatas[t].Status}},toEdit:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.saveEdit(e.editRow)})},saveEdit:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("updateGMAccount",e);case 4:a=t.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.showEdit=!1,this.$Message.success("修改成功!"),this.toQuery()),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:this.loading=!1;case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}(),toDelete:function(t){this.delRow=Object(i["a"])({},this.tableDatas[t]);var e={AccountName:this.delRow.AccountName};this.deleteRow(e)},deleteRow:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("deleteGMAccount",e);case 4:a=t.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.showEdit=!1,this.$Message.success("删除成功!"),this.toQuery()),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:this.loading=!1;case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}(),toResetGoogle:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={user_name:this.tableDatas[e].AccountName},t.next=4,this.$store.dispatch("resetGoogleCode",a);case 4:this.$Message.success("重置成功!"),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}},t,this,[[0,7]])}));function e(e){return t.apply(this,arguments)}return e}()}},c=l,u=(a("c095"),a("2877")),d=Object(u["a"])(c,r,s,!1,null,"223ffa41",null);e["default"]=d.exports},2708:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var r={methods:{handleResult:function(t,e){var a={arrKeys:[],arrTitles:[],tableDatas:[],total:0};if(t&&t.data){var r=t.data;if(r.arrTitles&&r.arrTitles.arrString&&r.arrTitles.arrString.length&&(a.arrTitles=r.arrTitles.arrString),r.arrKeys&&r.arrKeys.arrString&&r.arrKeys.arrString.length&&(a.arrKeys=r.arrKeys.arrString),a.arrKeys.length||(a.arrKeys=a.arrTitles),e||(e=a.arrKeys),r.arrDatas&&r.arrDatas.length)for(var s=0;s<r.arrDatas.length;s++){for(var i={},n=0;n<e.length;n++)i[e[n]]=r.arrDatas[s].arrString[n];a.tableDatas.push(i)}a.total=r.nTotal?r.nTotal:0}return a},IUDSuccess:function(t){return!(t&&t.data&&t.data.hasOwnProperty("result")&&1===t.data.result)},exportData:function(t,e){this.$refs[t].exportCsv({filename:e})}}}},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");var r=a("cb7c"),s=a("0bfb"),i=a("9e1e"),n="toString",o=/./[n],l=function(t){a("2aba")(RegExp.prototype,n,t,!0)};a("79e5")(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?l(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?s.call(t):void 0)}):o.name!=n&&l(function(){return o.call(this)})},c095:function(t,e,a){"use strict";var r=a("fdf6"),s=a.n(r);s.a},fdf6:function(t,e,a){}}]);
//# sourceMappingURL=chunk-b0514e46.84572b2b.js.map