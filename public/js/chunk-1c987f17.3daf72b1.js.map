{"version":3,"sources":["webpack:///./src/utils/mixins.js","webpack:///./src/views/risk/record.vue?e13e","webpack:///src/views/risk/record.vue","webpack:///./src/views/risk/record.vue?9822","webpack:///./src/views/risk/record.vue","webpack:///./src/views/risk/record.vue?102f"],"names":["__webpack_require__","d","__webpack_exports__","myMixin","methods","handleResult","result","keys","res","arrKeys","arrTitles","tableDatas","total","data","arrString","length","arrDatas","i","rowObj","index","push","nTotal","IUDSuccess","hasOwnProperty","exportData","refName","filename","this","$refs","exportCsv","render","_vm","_h","$createElement","_c","_self","attrs","label-position","label-width","inline","label","staticStyle","width","clearable","model","value","query","callback","$$v","$set","expression","_l","item","key","_v","_s","type","btTypes","size","on","click","$event","changeDate","datasTime","format","placement","placeholder","on-change","pickerChange","on-clear","clearDate","loading","queryLoading","icon","toQuery","toUpdateAll","ref","border","columns","stripe","on-sort-change","sortChange","staticClass","page-size-opts","current","page","class-name","show-total","show-elevator","show-sizer","page-size","on-page-size-change","pageSizeChange","pageChange","staticRenderFns","recordvue_type_script_lang_js_","mixins","_this","statuss","status","per_page","title","align","h","params","props","row","style","marginRight","toEdit","minWidth","mounted","init","computed","Object","objectSpread","vuex_esm","queryList","obj","order_by","order","am","b","day","start","Date","end","setDate","getDate","getDateFormate","date","getFullYear","getMonth","perPage","_queryList","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","start_time","end_time","$store","dispatch","sent","meta","t0","stop","apply","arguments","saveEdit","id","_toUpdateAll","_callee2","_context2","name","$Message","error","szresult","showEdit","success","_saveEdit","_callee3","ids","_context3","_x","risk_recordvue_type_script_lang_js_","component","componentNormalizer","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_record_vue_vue_type_style_index_0_id_058934d2_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_record_vue_vue_type_style_index_0_id_058934d2_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"gHAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAO,IAAMA,EAAU,CACrBC,QAAS,CAEPC,aAFO,SAEOC,EAAQC,GACpB,IAAIC,EAAM,CAAEC,QAAS,GAAIC,UAAW,GAAIC,WAAY,GAAIC,MAAO,GAC/D,GAAIN,GAAUA,EAAOO,KAAM,CACzB,IAAIA,EAAOP,EAAOO,KAalB,GAZIA,EAAKH,WAAaG,EAAKH,UAAUI,WAAaD,EAAKH,UAAUI,UAAUC,SACzEP,EAAIE,UAAYG,EAAKH,UAAUI,WAE7BD,EAAKJ,SAAWI,EAAKJ,QAAQK,WAAaD,EAAKJ,QAAQK,UAAUC,SACnEP,EAAIC,QAAUI,EAAKJ,QAAQK,WAExBN,EAAIC,QAAQM,SACfP,EAAIC,QAAUD,EAAIE,WAEfH,IACHA,EAAOC,EAAIC,SAETI,EAAKG,UAAYH,EAAKG,SAASD,OACjC,IAAK,IAAIE,EAAI,EAAGA,EAAIJ,EAAKG,SAASD,OAAQE,IAAK,CAE7C,IADA,IAAIC,EAAS,GACJC,EAAQ,EAAGA,EAAQZ,EAAKQ,OAAQI,IACvCD,EAAOX,EAAKY,IAAUN,EAAKG,SAASC,GAAGH,UAAUK,GAEnDX,EAAIG,WAAWS,KAAKF,GAGxBV,EAAII,MAAQC,EAAKQ,OAASR,EAAKQ,OAAS,EAE1C,OAAOb,GAETc,WA/BO,SA+BKd,GACV,QAAIA,GAAOA,EAAIK,MAAQL,EAAIK,KAAKU,eAAe,WAAiC,IAApBf,EAAIK,KAAKP,SAKvEkB,WArCO,SAqCKC,EAASC,GACnBC,KAAKC,MAAMH,GAASI,UAAU,CAC5BH,4DCxCR,IAAAI,EAAA,WAA0B,IAAAC,EAAAJ,KAAaK,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,QAA4BE,MAAA,CAAOC,iBAAA,QAAAC,cAAA,GAAAC,OAAA,KAAuD,CAAAL,EAAA,YAAiBE,MAAA,CAAOI,MAAA,QAAe,CAAAN,EAAA,UAAeO,YAAA,CAAaC,MAAA,SAAgBN,MAAA,CAAQO,UAAA,IAAeC,MAAA,CAAQC,MAAAd,EAAAe,MAAA,OAAAC,SAAA,SAAAC,GAAkDjB,EAAAkB,KAAAlB,EAAAe,MAAA,SAAAE,IAAmCE,WAAA,iBAA4BnB,EAAAoB,GAAApB,EAAA,iBAAAqB,GAAqC,OAAAlB,EAAA,UAAoBmB,IAAAD,EAAAP,MAAAT,MAAA,CAAsBS,MAAAO,EAAAP,QAAoB,CAAAd,EAAAuB,GAAAvB,EAAAwB,GAAAH,EAAAZ,YAA+B,OAAAN,EAAA,YAAwBE,MAAA,CAAOI,MAAA,UAAiB,CAAAN,EAAA,UAAeE,MAAA,CAAOoB,KAAAzB,EAAA0B,QAAA,GAAAC,KAAA,SAAqCC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAA9B,EAAA+B,YAAA,MAA4B,CAAA/B,EAAAuB,GAAA,QAAApB,EAAA,UAA8BE,MAAA,CAAOoB,KAAAzB,EAAA0B,QAAA,GAAAC,KAAA,SAAqCC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAA9B,EAAA+B,WAAA,MAA2B,CAAA/B,EAAAuB,GAAA,QAAApB,EAAA,UAA8BE,MAAA,CAAOoB,KAAAzB,EAAA0B,QAAA,GAAAC,KAAA,SAAqCC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAA9B,EAAA+B,WAAA,MAA2B,CAAA/B,EAAAuB,GAAA,SAAApB,EAAA,UAA+BE,MAAA,CAAOoB,KAAAzB,EAAA0B,QAAA,GAAAC,KAAA,SAAqCC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAA9B,EAAA+B,WAAA,OAA4B,CAAA/B,EAAAuB,GAAA,SAAApB,EAAA,cAAmCO,YAAA,CAAaC,MAAA,SAAgBN,MAAA,CAAQS,MAAAd,EAAAgC,UAAAC,OAAA,aAAAR,KAAA,YAAAb,UAAA,GAAAsB,UAAA,aAAAC,YAAA,eAAmIP,GAAA,CAAKQ,YAAApC,EAAAqC,aAAAC,WAAAtC,EAAAuC,cAAuD,GAAApC,EAAA,YAAqBE,MAAA,CAAOE,cAAA,IAAiB,CAAAJ,EAAA,UAAeE,MAAA,CAAOoB,KAAA,UAAAe,QAAAxC,EAAAyC,aAAAC,KAAA,cAAgEd,GAAA,CAAKC,MAAA7B,EAAA2C,UAAqB,CAAA3C,EAAAuB,GAAA,YAAApB,EAAA,YAAoCE,MAAA,CAAOE,cAAA,KAAkB,CAAAJ,EAAA,UAAeE,MAAA,CAAOoB,KAAA,UAAAe,QAAAxC,EAAAyC,aAAAC,KAAA,qBAAuEd,GAAA,CAAKC,MAAA7B,EAAA4C,cAAyB,CAAA5C,EAAAuB,GAAA,oBAAApB,EAAA,SAAyC0C,IAAA,YAAAxC,MAAA,CAAuBmC,QAAAxC,EAAAyC,aAAAK,OAAA,GAAAC,QAAA/C,EAAA+C,QAAAjE,KAAAkB,EAAApB,WAAAoE,OAAA,IAA+FpB,GAAA,CAAKqB,iBAAAjD,EAAAkD,cAAiC/C,EAAA,QAAagD,YAAA,gBAAA9C,MAAA,CAAmCxB,MAAAmB,EAAAnB,MAAAuE,iBAAA,YAAAC,QAAArD,EAAAsD,KAAAC,aAAA,gBAAA5B,KAAA,QAAA6B,aAAA,GAAAC,gBAAA,GAAAC,aAAA,GAAAC,YAAA,IAAgL/B,GAAA,CAAKgC,sBAAA5D,EAAA6D,eAAAzB,YAAApC,EAAA8D,eAAqE,IACnpEC,EAAA,yEC+BAC,EAAA,CACAC,OAAA,CAAAA,EAAA,MACAnF,KAFA,WAEA,IAAAoF,EAAAtE,KACA,OACA6C,cAAA,EACAf,QAAA,cACAyC,QAAA,EAAA1D,MAAA,KAAAK,MAAA,MAAAL,MAAA,KAAAK,MAAA,MACA0B,SAAA,EACAzB,MAAA,CAAAqD,OAAA,KACApC,UAAA,GACAsB,KAAA,EACAe,SAAA,GACAxF,MAAA,EACAkE,QAAA,CACA,CACAuB,MAAA,OACAhD,IAAA,SACAiD,MAAA,SACA5D,MAAA,IACAZ,OAAA,SAAAyE,EAAAC,GACA,OAAAD,EAAA,OACAA,EACA,SACA,CACAE,MAAA,CACAjD,KAAA,IAAAgD,EAAAE,IAAAP,OAAA,iBAEAzC,KAAA,SAEAiD,MAAA,CACAC,YAAA,OAEAjD,GAAA,CACAC,MAAA,WACAqC,EAAAY,OAAAL,EAAArF,UAGA,IAAAqF,EAAAE,IAAAP,OAAA,iBAMA,CACAE,MAAA,OACA3D,MAAA,IAEAW,IAAA,MAEA,CACAgD,MAAA,OACA3D,MAAA,IAEAW,IAAA,cAEA,CACAgD,MAAA,MACA3D,MAAA,IACAW,IAAA,aAEA,CACAgD,MAAA,OACAS,SAAA,IACAzD,IAAA,WAEA,CACAgD,MAAA,SACA3D,MAAA,IACAW,IAAA,eAIA1C,WAAA,KAGAoG,QA3EA,WA4EApF,KAAAqF,QAEAC,SAAAC,OAAAC,EAAA,KAAAD,CAAA,GACAA,OAAAE,EAAA,KAAAF,CAAA,CACA,UAGA9G,QAAA,CACA4G,KADA,WAEArF,KAAA0F,aAEApC,WAJA,SAIAqC,GACA3F,KAAAmB,MAAAyE,SAAAD,EAAAjE,IAAA,IAAAiE,EAAAE,MACA7F,KAAA0F,aAEAjD,aARA,SAQAqD,EAAAC,GACA/F,KAAAoC,UAAA0D,EAAA9F,KAAA2C,aAEAA,UAXA,WAYA3C,KAAA8B,QAAA,eAEAK,WAdA,SAcA6D,GACAhG,KAAAoC,UAAA,GACA,IAAA6D,EAAA,IAAAC,KACAC,EAAA,IAAAD,MACA,IAAAF,IACAhG,KAAA8B,QAAA,qBACAmE,EAAAG,QAAAH,EAAAI,UAAA,GACAF,EAAAC,QAAAD,EAAAE,UAAA,GACArG,KAAAoC,UAAA,CAAApC,KAAAsG,eAAAL,GAAAjG,KAAAsG,eAAAH,KAEA,IAAAH,IACAhG,KAAA8B,QAAA,qBACA9B,KAAAoC,UAAA,CAAApC,KAAAsG,eAAAL,GAAAjG,KAAAsG,eAAAH,KAEA,IAAAH,IACAhG,KAAA8B,QAAA,qBACAmE,EAAAG,QAAAH,EAAAI,UAAA,GACArG,KAAAoC,UAAA,CAAApC,KAAAsG,eAAAL,GAAAjG,KAAAsG,eAAAH,KAEA,KAAAH,IACAhG,KAAA8B,QAAA,qBACAmE,EAAAG,QAAAH,EAAAI,UAAA,IACArG,KAAAoC,UAAA,CAAApC,KAAAsG,eAAAL,GAAAjG,KAAAsG,eAAAH,MAGAG,eAvCA,SAuCAC,GACA,OAAAA,EAAAC,cAAA,KAAAD,EAAAE,WAAA,OAAAF,EAAAF,WAEAnC,WA1CA,SA0CAR,GACA1D,KAAA0D,OACA1D,KAAA0F,aAEAzB,eA9CA,SA8CAyC,GACA1G,KAAAyE,WAAAiC,IACA1G,KAAAyE,SAAAiC,EACA1G,KAAA0F,cAGAA,UApDA,eAAAiB,EAAApB,OAAAqB,EAAA,KAAArB,CAAAsB,mBAAAC,KAAA,SAAAC,IAAA,IAAA7H,EAAAP,EAAA,OAAAkI,mBAAAG,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAsDAlH,KAAA6C,cAAA,EACA3D,EAvDAqG,OAAAC,EAAA,KAAAD,CAAA,CAwDA7B,KAAA1D,KAAA0D,KACAe,SAAAzE,KAAAyE,UACAzE,KAAAmB,MA1DA,CA2DAiG,WAAApH,KAAAoC,UAAAhD,OAAA,GAAAY,KAAAoC,UAAA,GAAApC,KAAAoC,UAAA,MACAiF,SAAArH,KAAAoC,UAAAhD,OAAA,GAAAY,KAAAoC,UAAA,GAAApC,KAAAoC,UAAA,oBA5DA6E,EAAAE,KAAA,EA8DAnH,KAAAsH,OAAAC,SAAA,iBAAArI,GA9DA,OA8DAP,EA9DAsI,EAAAO,KA+DA7I,KAAAO,OACAc,KAAAhB,WAAAL,EAAAO,MAEAc,KAAAf,MAAAN,KAAA8I,MAAA9I,EAAA8I,KAAAxI,MAAAN,EAAA8I,KAAAxI,MAAA,EAlEAgI,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAS,GAAAT,EAAA,oBAqEAjH,KAAA6C,cAAA,EArEA,yBAAAoE,EAAAU,SAAAZ,EAAA/G,KAAA,sBAAA0F,IAAA,OAAAiB,EAAAiB,MAAA5H,KAAA6H,WAAA,OAAAnC,EAAA,GAuEA3C,QAvEA,WAwEA/C,KAAA0D,KAAA,EACA1D,KAAA0F,aAEAR,OA3EA,SA2EA1F,GACA,IAAAmG,EAAA3F,KAAAhB,WAAAQ,GACA,KAAAmG,EAAAnB,QACAxE,KAAA8H,SAAA,CAAAnC,EAAAoC,MAGA/E,YAjFA,eAAAgF,EAAAzC,OAAAqB,EAAA,KAAArB,CAAAsB,mBAAAC,KAAA,SAAAmB,IAAA,IAAApJ,EAAA,OAAAgI,mBAAAG,KAAA,SAAAkB,GAAA,eAAAA,EAAAhB,KAAAgB,EAAAf,MAAA,cAAAe,EAAAhB,KAAA,EAmFAlH,KAAA4C,SAAA,EAnFAsF,EAAAf,KAAA,EAoFAnH,KAAAsH,OAAAC,SAAA,2BAAAY,KAAAnI,KAAAmI,OApFA,OAoFAtJ,EApFAqJ,EAAAV,KAqFA3I,EAAAK,MAAAL,EAAAK,KAAAU,eAAA,eAAAf,EAAAK,KAAAP,OACAqB,KAAAoI,SAAAC,MAAAxJ,EAAAK,KAAAoJ,WAEAtI,KAAAuI,UAAA,EACAvI,KAAAoI,SAAAI,QAAA,SACAxI,KAAA+C,WA1FAmF,EAAAf,KAAA,gBAAAe,EAAAhB,KAAA,EAAAgB,EAAAR,GAAAQ,EAAA,oBA+FAlI,KAAA4C,SAAA,EA/FA,yBAAAsF,EAAAP,SAAAM,EAAAjI,KAAA,qBAAAgD,IAAA,OAAAgF,EAAAJ,MAAA5H,KAAA6H,WAAA,OAAA7E,EAAA,GAiGA8E,SAjGA,eAAAW,EAAAlD,OAAAqB,EAAA,KAAArB,CAAAsB,mBAAAC,KAAA,SAAA4B,EAiGAC,GAjGA,IAAA9J,EAAA,OAAAgI,mBAAAG,KAAA,SAAA4B,GAAA,eAAAA,EAAA1B,KAAA0B,EAAAzB,MAAA,cAAAyB,EAAA1B,KAAA,EAmGAlH,KAAA4C,SAAA,EAnGAgG,EAAAzB,KAAA,EAoGAnH,KAAAsH,OAAAC,SAAA,qBAAAoB,MAAAR,KAAAnI,KAAAmI,OApGA,OAoGAtJ,EApGA+J,EAAApB,KAqGA3I,EAAAK,MAAAL,EAAAK,KAAAU,eAAA,eAAAf,EAAAK,KAAAP,OACAqB,KAAAoI,SAAAC,MAAAxJ,EAAAK,KAAAoJ,WAEAtI,KAAAuI,UAAA,EACAvI,KAAAoI,SAAAI,QAAA,aACAxI,KAAA+C,WA1GA6F,EAAAzB,KAAA,gBAAAyB,EAAA1B,KAAA,EAAA0B,EAAAlB,GAAAkB,EAAA,oBA+GA5I,KAAA4C,SAAA,EA/GA,yBAAAgG,EAAAjB,SAAAe,EAAA1I,KAAA,qBAAA8H,EAAAe,GAAA,OAAAJ,EAAAb,MAAA5H,KAAA6H,WAAA,OAAAC,EAAA,KCnH+VgB,EAAA,0BCQ/VC,EAAgBxD,OAAAyD,EAAA,KAAAzD,CACduD,EACA3I,EACAgE,GACF,EACA,KACA,WACA,MAIe5F,EAAA,WAAAwK,oECnBf,IAAAE,EAAA5K,EAAA,QAAA6K,EAAA7K,EAAA8K,EAAAF,GAA4jBC,EAAG","file":"js/chunk-1c987f17.3daf72b1.js","sourcesContent":["export const myMixin = {\n  methods: {\n\n    handleResult (result, keys) {\n      let res = { arrKeys: [], arrTitles: [], tableDatas: [], total: 0 }\n      if (result && result.data) {\n        let data = result.data\n        if (data.arrTitles && data.arrTitles.arrString && data.arrTitles.arrString.length) {\n          res.arrTitles = data.arrTitles.arrString\n        }\n        if (data.arrKeys && data.arrKeys.arrString && data.arrKeys.arrString.length) {\n          res.arrKeys = data.arrKeys.arrString\n        }\n        if (!res.arrKeys.length) {\n          res.arrKeys = res.arrTitles\n        }\n        if (!keys) {\n          keys = res.arrKeys\n        }\n        if (data.arrDatas && data.arrDatas.length) {\n          for (let i = 0; i < data.arrDatas.length; i++) {\n            var rowObj = {}\n            for (let index = 0; index < keys.length; index++) {\n              rowObj[keys[index]] = data.arrDatas[i].arrString[index]\n            }\n            res.tableDatas.push(rowObj)\n          }\n        }\n        res.total = data.nTotal ? data.nTotal : 0\n      }\n      return res\n    },\n    IUDSuccess (res) {\n      if (res && res.data && res.data.hasOwnProperty('result') && res.data.result === 1) {\n        return false\n      }\n      return true\n    },\n    exportData (refName, filename) {\n      this.$refs[refName].exportCsv({\n        filename\n      })\n    }\n\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Form',{attrs:{\"label-position\":\"right\",\"label-width\":70,\"inline\":\"\"}},[_c('FormItem',{attrs:{\"label\":\"类型:\"}},[_c('Select',{staticStyle:{\"width\":\"100px\"},attrs:{\"clearable\":\"\"},model:{value:(_vm.query.status),callback:function ($$v) {_vm.$set(_vm.query, \"status\", $$v)},expression:\"query.status\"}},_vm._l((_vm.statuss),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1)],1),_c('FormItem',{attrs:{\"label\":\"时间选择:\"}},[_c('Button',{attrs:{\"type\":_vm.btTypes[3],\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeDate(-1)}}},[_vm._v(\"昨天\")]),_c('Button',{attrs:{\"type\":_vm.btTypes[0],\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeDate(1)}}},[_vm._v(\"今天\")]),_c('Button',{attrs:{\"type\":_vm.btTypes[1],\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeDate(7)}}},[_vm._v(\"近一周\")]),_c('Button',{attrs:{\"type\":_vm.btTypes[2],\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeDate(30)}}},[_vm._v(\"近一月\")]),_c('DatePicker',{staticStyle:{\"width\":\"200px\"},attrs:{\"value\":_vm.datasTime,\"format\":\"yyyy/MM/dd\",\"type\":\"daterange\",\"clearable\":\"\",\"placement\":\"bottom-end\",\"placeholder\":\"Select date\"},on:{\"on-change\":_vm.pickerChange,\"on-clear\":_vm.clearDate}})],1),_c('FormItem',{attrs:{\"label-width\":1}},[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.queryLoading,\"icon\":\"ios-search\"},on:{\"click\":_vm.toQuery}},[_vm._v(\"查询\")])],1),_c('FormItem',{attrs:{\"label-width\":30}},[_c('Button',{attrs:{\"type\":\"success\",\"loading\":_vm.queryLoading,\"icon\":\"checkmark-circled\"},on:{\"click\":_vm.toUpdateAll}},[_vm._v(\"全部标为已读\")])],1)],1),_c('Table',{ref:\"selection\",attrs:{\"loading\":_vm.queryLoading,\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.tableDatas,\"stripe\":\"\"},on:{\"on-sort-change\":_vm.sortChange}}),_c('Page',{staticClass:\"margin-top-10\",attrs:{\"total\":_vm.total,\"page-size-opts\":[20,50,100],\"current\":_vm.page,\"class-name\":\"margin-top-10\",\"size\":\"small\",\"show-total\":\"\",\"show-elevator\":\"\",\"show-sizer\":\"\",\"page-size\":20},on:{\"on-page-size-change\":_vm.pageSizeChange,\"on-change\":_vm.pageChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Form label-position=\"right\" :label-width=\"70\" inline>\r\n\r\n      <FormItem label=\"类型:\" class=\"\">\r\n        <Select v-model=\"query.status\" style=\"width:100px\" clearable>\r\n          <Option v-for=\"item in statuss\" :value=\"item.value\" :key=\"item.value\">{{ item.label }}</Option>\r\n        </Select>\r\n      </FormItem>\r\n      <FormItem label=\"时间选择:\" class=\"\">\r\n         <Button :type=\"btTypes[3]\" @click=\"changeDate(-1)\" size=\"small\">昨天</Button>         <Button :type=\"btTypes[0]\" @click=\"changeDate(1)\" size=\"small\">今天</Button>\r\n        <Button :type=\"btTypes[1]\" @click=\"changeDate(7)\" size=\"small\">近一周</Button>\r\n        <Button :type=\"btTypes[2]\" @click=\"changeDate(30)\" size=\"small\">近一月</Button>\r\n        <DatePicker @on-change=\"pickerChange\" @on-clear=\"clearDate\" :value=\"datasTime\" format=\"yyyy/MM/dd\" type=\"daterange\" clearable placement=\"bottom-end\" placeholder=\"Select date\" style=\"width: 200px\"></DatePicker>\r\n      </FormItem>\r\n\r\n      <FormItem :label-width=\"1\" >\r\n        <Button type=\"primary\" @click=\"toQuery\" :loading=\"queryLoading\" icon=\"ios-search\">查询</Button>\r\n      </FormItem>\r\n      <FormItem :label-width=\"30\" >\r\n        <Button type=\"success\" @click=\"toUpdateAll\" :loading=\"queryLoading\" icon=\"checkmark-circled\">全部标为已读</Button>\r\n      </FormItem>\r\n    </Form>\r\n    <Table :loading=\"queryLoading\" @on-sort-change=\"sortChange\" border ref=\"selection\" :columns=\"columns\" :data=\"tableDatas\" stripe></Table>\r\n\r\n    <Page :total=\"total\" :page-size-opts=\"[20,50,100]\" :current=\"page\" class-name=\"margin-top-10\" @on-page-size-change=\"pageSizeChange\" @on-change=\"pageChange\" size=\"small\" show-total show-elevator show-sizer :page-size=\"20\" class=\"margin-top-10\"></Page>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { myMixin } from '@/utils/mixins.js'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  mixins: [myMixin],\r\n  data () {\r\n    return {\r\n      queryLoading: false,\r\n      btTypes: ['', '', '', ''],\r\n      statuss: [{ label: '未读', value: '0' }, { label: '已读', value: '1' }],\r\n      loading: false,\r\n      query: {status: '0'},\r\n      datasTime: [],\r\n      page: 1,\r\n      per_page: 20,\r\n      total: 0,\r\n      columns: [\r\n        {\r\n          title: '是否已读',\r\n          key: 'action',\r\n          align: 'center',\r\n          width: 160,\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h(\r\n                'Button',\r\n                {\r\n                  props: {\r\n                    type: (params.row.status === 1) ? 'text' : 'warning',\r\n                    // icon: 'compose',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '2px'\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.toEdit(params.index)\r\n                    }\r\n                  }\r\n                }, (params.row.status === 1) ? '已读' : ' 未读 '\r\n              )\r\n            ])\r\n          }\r\n        },\r\n\r\n        {\r\n          title: '记录ID',\r\n          width: 100,\r\n\r\n          key: 'id'\r\n        },\r\n        {\r\n          title: '触发时间',\r\n          width: 160,\r\n\r\n          key: 'created_at'\r\n        },\r\n        {\r\n          title: '引发者',\r\n          width: 160,\r\n          key: 'case_user'\r\n        },\r\n        {\r\n          title: '触发内容',\r\n          minWidth: 160,\r\n          key: 'content'\r\n        },\r\n        {\r\n          title: '已查看管理员',\r\n          width: 160,\r\n          key: 'admin_user'\r\n        }\r\n\r\n      ],\r\n      tableDatas: []\r\n    }\r\n  },\r\n  mounted () {\r\n    this.init()\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'name'\r\n    ])\r\n  },\r\n  methods: {\r\n    init () {\r\n      this.queryList()\r\n    },\r\n    sortChange (obj) {\r\n      this.query.order_by = obj.key + ' ' + obj.order\r\n      this.queryList()\r\n    },\r\n    pickerChange (am, b) {\r\n      this.datasTime = am; this.clearDate()\r\n    },\r\n    clearDate () {\r\n      this.btTypes = ['', '', '', '']\r\n    },\r\n    changeDate (day) {\r\n      this.datasTime = []\r\n      var start = new Date()\r\n      var end = new Date()\r\n      if (day === -1) {\r\n        this.btTypes = [ '', '', '', 'success' ]\r\n        start.setDate(start.getDate() - 1)\r\n        end.setDate(end.getDate() - 1)\r\n        this.datasTime = [this.getDateFormate(start), this.getDateFormate(end)]\r\n      }\r\n      if (day === 1) {\r\n        this.btTypes = ['success', '', '', '']\r\n        this.datasTime = [this.getDateFormate(start), this.getDateFormate(end)]\r\n      }\r\n      if (day === 7) {\r\n        this.btTypes = ['', 'success', '', '']\r\n        start.setDate(start.getDate() - 6)\r\n        this.datasTime = [this.getDateFormate(start), this.getDateFormate(end)]\r\n      }\r\n      if (day === 30) {\r\n        this.btTypes = ['', '', 'success', '']\r\n        start.setDate(start.getDate() - 29)\r\n        this.datasTime = [this.getDateFormate(start), this.getDateFormate(end)]\r\n      }\r\n    },\r\n    getDateFormate (date) {\r\n      return date.getFullYear() + '/' + (date.getMonth() + 1) + '/' + date.getDate()\r\n    },\r\n    pageChange (page) {\r\n      this.page = page\r\n      this.queryList()\r\n    },\r\n    pageSizeChange (perPage) {\r\n      if (this.per_page !== perPage) {\r\n        this.per_page = perPage\r\n        this.queryList()\r\n      }\r\n    },\r\n    async queryList () {\r\n      try {\r\n        this.queryLoading = true\r\n        const data = {\r\n          page: this.page,\r\n          per_page: this.per_page,\r\n          ...this.query,\r\n          start_time: (this.datasTime.length > 0 && this.datasTime[0]) ? this.datasTime[0] : '',\r\n          end_time: (this.datasTime.length > 1 && this.datasTime[1]) ? this.datasTime[1] + ' 23:59:59' : ''\r\n        }\r\n        const result = await this.$store.dispatch('getRiskRecords', data)\r\n        if (result && result.data) {\r\n          this.tableDatas = result.data\r\n        }\r\n        this.total = (result && result.meta && result.meta.total) ? result.meta.total : 0\r\n      } catch (error) {\r\n      }\r\n      this.queryLoading = false\r\n    },\r\n    toQuery () {\r\n      this.page = 1\r\n      this.queryList()\r\n    },\r\n    toEdit (index) {\r\n      var obj = this.tableDatas[index]\r\n      if ((+obj.status) === 0) {\r\n        this.saveEdit([obj.id])\r\n      }\r\n    },\r\n    async toUpdateAll () {\r\n      try {\r\n        this.loading = true\r\n        const res = await this.$store.dispatch('updateNoReadRiskRecords', {name: this.name})\r\n        if (res.data && res.data.hasOwnProperty('result') && res.data.result !== 0) {\r\n          this.$Message.error(res.data.szresult)\r\n        } else {\r\n          this.showEdit = false\r\n          this.$Message.success('修改成功!')\r\n          this.toQuery()\r\n        }\r\n      } catch (error) {\r\n\r\n      }\r\n      this.loading = false\r\n    },\r\n    async saveEdit (ids) {\r\n      try {\r\n        this.loading = true\r\n        const res = await this.$store.dispatch('updateRiskRecords', {ids: ids, name: this.name})\r\n        if (res.data && res.data.hasOwnProperty('result') && res.data.result !== 0) {\r\n          this.$Message.error(res.data.szresult)\r\n        } else {\r\n          this.showEdit = false\r\n          this.$Message.success('已读, 修改成功!')\r\n          this.toQuery()\r\n        }\r\n      } catch (error) {\r\n\r\n      }\r\n      this.loading = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.margin-top-10 {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./record.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./record.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./record.vue?vue&type=template&id=058934d2&scoped=true&\"\nimport script from \"./record.vue?vue&type=script&lang=js&\"\nexport * from \"./record.vue?vue&type=script&lang=js&\"\nimport style0 from \"./record.vue?vue&type=style&index=0&id=058934d2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"058934d2\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./record.vue?vue&type=style&index=0&id=058934d2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./record.vue?vue&type=style&index=0&id=058934d2&lang=less&scoped=true&\""],"sourceRoot":""}