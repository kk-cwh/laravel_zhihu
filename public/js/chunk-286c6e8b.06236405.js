(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-286c6e8b"],{"0b0d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{attrs:{"label-position":"right","label-width":70,inline:""}},[a("FormItem",{attrs:{label:"ID:"}},[a("Input",{attrs:{clearable:"",type:"text",placeholder:"填写玩家ID"},model:{value:e.query.userid,callback:function(t){e.$set(e.query,"userid",t)},expression:"query.userid"}})],1),a("FormItem",{attrs:{label:"流通类型:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.query.logtype,callback:function(t){e.$set(e.query,"logtype",t)},expression:"query.logtype"}},e._l(e.logtypes,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("FormItem",{attrs:{label:"游戏:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.query.LogUse,callback:function(t){e.$set(e.query,"LogUse",t)},expression:"query.LogUse"}},e._l(e.logUseTypes,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("FormItem",{attrs:{label:"时间选择:"}},[a("Button",{attrs:{type:e.btTypes[3],size:"small"},on:{click:function(t){return e.changeDate(-1)}}},[e._v("昨天")]),a("Button",{attrs:{type:e.btTypes[0],size:"small"},on:{click:function(t){return e.changeDate(1)}}},[e._v("今天")]),a("Button",{attrs:{type:e.btTypes[1],size:"small"},on:{click:function(t){return e.changeDate(7)}}},[e._v("近一周")]),a("Button",{attrs:{type:e.btTypes[2],size:"small"},on:{click:function(t){return e.changeDate(30)}}},[e._v("近一月")]),a("DatePicker",{staticStyle:{width:"200px"},attrs:{value:e.datasTime,format:"yyyy/MM/dd",type:"daterange",clearable:"",placement:"bottom-end",placeholder:"Select date"},on:{"on-change":e.pickerChange,"on-clear":e.clearDate}})],1),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",loading:e.queryLoading,icon:"ios-search"},on:{click:e.toQuery}},[e._v("查询")])],1)],1),a("Table",{ref:"selection",attrs:{loading:e.queryLoading,border:"",columns:e.columns,data:e.tableDatas,stripe:""},on:{"on-sort-change":e.sortChange}}),a("Page",{staticClass:"margin-top-10",attrs:{total:e.total,"page-size-opts":[20,50,100],current:e.page,"class-name":"margin-top-10",size:"small","show-total":"","show-elevator":"","show-sizer":"","page-size":20},on:{"on-page-size-change":e.pageSizeChange,"on-change":e.pageChange}}),a("Modal",{attrs:{title:"调整玩家携带金币",width:"480"},model:{value:e.showAdd,callback:function(t){e.showAdd=t},expression:"showAdd"}},[a("Form",{ref:"formValidate",attrs:{model:e.addRow,rules:e.ruleValidate,"label-position":"right","label-width":140}},[a("FormItem",{attrs:{label:"玩家ID",prop:"UserID"}},[a("Input",{staticStyle:{width:"200px"},model:{value:e.addRow.UserID,callback:function(t){e.$set(e.addRow,"UserID",t)},expression:"addRow.UserID"}})],1),a("FormItem",{attrs:{label:"调整数量",prop:"Money"}},[a("Input",{staticStyle:{width:"200px"},model:{value:e.addRow.Money,callback:function(t){e.$set(e.addRow,"Money",t)},expression:"addRow.Money"}})],1),a("FormItem",{attrs:{label:"调整原因",prop:"reason"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"Enter something..."},model:{value:e.addRow.reason,callback:function(t){e.$set(e.addRow,"reason",t)},expression:"addRow.reason"}})],1)],1),a("div",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:e.cancel}},[e._v("取消")]),a("Button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.toAdd("formValidate")}}},[e._v("保存")])],1)],1),a("Modal",{staticClass:"demo-tabs-style1",attrs:{width:"720",title:"金币日志",transfer:!1},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[a("Table",{ref:"selection",attrs:{size:"small",loading:e.gameLoading,border:"",columns:e.gameColumns,data:e.gameTableDatas,stripe:""}}),a("Page",{staticClass:"margin-top-10",attrs:{total:e.gTotal,"page-size-opts":[20,50,100],current:e.gPage,"class-name":"margin-top-10",size:"small","show-total":"","show-elevator":"","show-sizer":"","page-size":20},on:{"on-page-size-change":e.gpageSizeChange,"on-change":e.gpageChange}}),a("div",{staticStyle:{color:"#f60","text-align":"right"},attrs:{slot:"footer"},slot:"footer"})],1)],1)},r=[],i=(a("7f7f"),a("cebc")),n=(a("96cf"),a("3b8d")),l=a("2708"),o={mixins:[l["a"]],data:function(){return{queryLoading:!1,gameLoading:!1,btTypes:["","","",""],logtypes:[{label:"游戏",value:"游戏"},{label:"银行",value:"银行"},{label:"提现",value:"提现"},{label:"系统",value:"系统"},{label:"邮件",value:"邮件"}],logUseTypes:[{label:"四人牛牛",value:"srnn"},{label:"斗地主",value:"ddz"},{label:"拼三张",value:"zjh"},{label:"二人麻将",value:"ermj"},{label:"红黑大战",value:"hhdz"},{label:"百家乐",value:"bjl"},{label:"摇一摇",value:"yyy"},{label:"百人牛牛",value:"bbnn"},{label:"豪车俱乐部",value:"bcbm"},{label:"捕鱼",value:"fish"},{label:"神兽转盘",value:"fqzs"},{label:"水果机",value:"sgj"},{label:"财神红包",value:"qhb"},{label:"扫雷红包",value:"slhb"}],loading:!1,query:{},datasTime:[],page:1,per_page:20,total:0,showEdit:!1,showAdd:!1,addRow:{},editRow:{},columns:[],tableDatas:[],ruleValidate:{UserID:[{required:!0,message:"玩家ID不能为空!",trigger:"blur"}],Money:[{required:!0,message:"调整数量不能为空!",trigger:"blur"}],reason:[{required:!0,message:"请填写调整原因！",trigger:"blur"}]},gPage:1,g_per_page:20,gTotal:0,Uuid:"",gameTableDatas:[],gameColumns:[]}},mounted:function(){},computed:{},methods:{init:function(){this.queryList()},sortChange:function(e){this.query.order_by=e.key+" "+e.order,this.queryList()},pickerChange:function(e,t){this.datasTime=e,this.clearDate()},clearDate:function(){this.btTypes=["","","",""]},changeDate:function(e){this.datasTime=[];var t=new Date,a=new Date;-1===e&&(this.btTypes=["","","","success"],t.setDate(t.getDate()-1),a.setDate(a.getDate()-1),this.datasTime=[this.getDateFormate(t),this.getDateFormate(a)]),1===e&&(this.btTypes=["success","","",""],this.datasTime=[this.getDateFormate(t),this.getDateFormate(a)]),7===e&&(this.btTypes=["","success","",""],t.setDate(t.getDate()-6),this.datasTime=[this.getDateFormate(t),this.getDateFormate(a)]),30===e&&(this.btTypes=["","","success",""],t.setDate(t.getDate()-29),this.datasTime=[this.getDateFormate(t),this.getDateFormate(a)])},getDateFormate:function(e){return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()},pageChange:function(e){this.page=e,this.queryList()},pageSizeChange:function(e){this.per_page!==e&&(this.per_page=e,this.queryList())},queryList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s,r,n,l,o,u,h,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.queryLoading=!0,t=(this.page-1)*this.per_page,a=this.page*this.per_page,s=Object(i["a"])({page:this.page,per_page:this.per_page,minIndex:t,maxIndex:a>this.total&&this.total&&this.page>1?this.total:a},this.query,{start_time:this.datasTime.length>0&&this.datasTime[0]?this.datasTime[0]:"",end_time:this.datasTime.length>1&&this.datasTime[1]?this.datasTime[1]+" 23:59:59":""}),e.next=7,this.$store.dispatch("getGoldLogs",s);case 7:for(r=e.sent,n=this.handleResult(r),this.columns=[],l=n.arrTitles,o=n.arrKeys,u=0;u<o.length;u++)h={title:l[u],sortable:"custom",minWidth:140,align:"center",key:o[u]},"Uuid"===h.key&&(h.render=function(e,t){return e("div",[e("a",{style:{},on:{click:function(){c.showEditModal(t.index)}}},c.tableDatas[t.index].Uuid)])}),this.columns.push(h);this.tableDatas=n.tableDatas,this.total=n.total,e.next=19;break;case 17:e.prev=17,e.t0=e["catch"](0);case 19:this.queryLoading=!1;case 20:case"end":return e.stop()}},e,this,[[0,17]])}));function t(){return e.apply(this,arguments)}return t}(),toQuery:function(){this.page=1,this.queryList()},handleReset:function(e){this.$refs[e].resetFields()},cancel:function(){this.showEdit=!1,this.showAdd=!1},showAddModal:function(){this.showAdd=!0,this.handleReset("formValidate"),this.addRow={}},toAdd:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.add(t.addRow)})},add:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$store.dispatch("updateGold",t);case 4:a=e.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.showAdd=!1,this.$Message.success("添加成功!"),this.toQuery()),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:this.loading=!1;case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(t){return e.apply(this,arguments)}return t}(),gpageChange:function(e){this.gPage=e,this.queryGameList()},gpageSizeChange:function(e){this.g_per_page!==e&&(this.g_per_page=e,this.queryGameList())},showEditModal:function(e){this.showEdit=!0,this.Uuid=this.tableDatas[e].Uuid,this.queryGameList()},queryGameList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s,r,i,n,l,o,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.gameLoading=!0,t=(this.gPage-1)*this.g_per_page,a=this.gPage*this.g_per_page,s={Uuid:this.Uuid,page:this.gPage,per_page:this.g_per_page,minIndex:t,maxIndex:a>this.gTotal&&this.gTotal&&this.gPage>1?this.gTotal:a},e.next=7,this.$store.dispatch("getGoldLogs",s);case 7:for(r=e.sent,i=this.handleResult(r),this.gameColumns=[],n=i.arrTitles,l=i.arrKeys,o=0;o<l.length;o++)u={title:n[o],sortable:"custom",minWidth:120,key:l[o]},this.gameColumns.push(u);this.gameTableDatas=i.tableDatas,this.gTotal=i.total,e.next=19;break;case 17:e.prev=17,e.t0=e["catch"](0);case 19:this.gameLoading=!1;case 20:case"end":return e.stop()}},e,this,[[0,17]])}));function t(){return e.apply(this,arguments)}return t}()}},u=o,h=(a("da75"),a("2877")),c=Object(h["a"])(u,s,r,!1,null,"00d735f2",null);t["default"]=c.exports},2708:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var s={methods:{handleResult:function(e,t){var a={arrKeys:[],arrTitles:[],tableDatas:[],total:0};if(e&&e.data){var s=e.data;if(s.arrTitles&&s.arrTitles.arrString&&s.arrTitles.arrString.length&&(a.arrTitles=s.arrTitles.arrString),s.arrKeys&&s.arrKeys.arrString&&s.arrKeys.arrString.length&&(a.arrKeys=s.arrKeys.arrString),a.arrKeys.length||(a.arrKeys=a.arrTitles),t||(t=a.arrKeys),s.arrDatas&&s.arrDatas.length)for(var r=0;r<s.arrDatas.length;r++){for(var i={},n=0;n<t.length;n++)i[t[n]]=s.arrDatas[r].arrString[n];a.tableDatas.push(i)}a.total=s.nTotal?s.nTotal:0}return a},IUDSuccess:function(e){return!(e&&e.data&&e.data.hasOwnProperty("result")&&1===e.data.result)},exportData:function(e,t){this.$refs[e].exportCsv({filename:t})}}}},d748:function(e,t,a){},da75:function(e,t,a){"use strict";var s=a("d748"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-286c6e8b.06236405.js.map