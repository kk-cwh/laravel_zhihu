(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14ad4744"],{"0f8a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"demo-tabs-style1",attrs:{value:t.show,width:"1000",closable:!1,transfer:!1},on:{"on-cancel":t.cancel}},[a("Tabs",{attrs:{type:"card"}},[a("TabPane",{attrs:{label:"游戏币来源"}},[a("Table",{attrs:{size:"small",loading:t.loading,border:"",columns:t.scolumns,data:t.stableDatas,stripe:""}})],1),a("TabPane",{attrs:{label:"游戏信息"}},[a("Table",{ref:"selection",attrs:{size:"small",loading:t.loading,border:"",columns:t.columns,data:t.tableDatas,stripe:""}}),a("Page",{staticClass:"margin-top-10",attrs:{total:t.total,"page-size-opts":[20,50,100],current:t.current,"class-name":"margin-top-10",size:"small","show-total":"","show-elevator":"","show-sizer":"","page-size":20},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)],1),a("div",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"footer"},slot:"footer"})],1)},r=[],n=(a("c5f6"),{props:{show:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},columns:{type:Array},tableDatas:{type:Array},scolumns:{type:Array},stableDatas:{type:Array},total:{type:Number,default:0},current:{type:Number,default:1}},data:function(){return{}},methods:{pageChange:function(t){this.$emit("page-change",t)},pageSizeChange:function(t){this.$emit("page-size-change",t)},cancel:function(){this.$emit("cancel")}}}),i=n,o=a("2877"),l=Object(o["a"])(i,s,r,!1,null,null,null);e["a"]=l.exports},"190e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{attrs:{"label-position":"right","label-width":70,inline:""}},[a("FormItem",{attrs:{label:"代理ID:"}},[a("Input",{attrs:{clearable:"",type:"text",placeholder:"代理ID"},model:{value:t.query.AgencyID,callback:function(e){t.$set(t.query,"AgencyID",e)},expression:"query.AgencyID"}})],1),a("FormItem",{attrs:{label:"玩家ID:"}},[a("Input",{attrs:{clearable:"",type:"text",placeholder:"填写玩家ID"},model:{value:t.query.UserID,callback:function(e){t.$set(t.query,"UserID",e)},expression:"query.UserID"}})],1),a("FormItem",{attrs:{label:"状态:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:t.query.Status,callback:function(e){t.$set(t.query,"Status",e)},expression:"query.Status"}},t._l(t.statusObj,function(e,s){return a("Option",{key:s,attrs:{value:s}},[t._v(t._s(e))])}),1)],1),a("FormItem",{attrs:{label:"时间选择:"}},[a("Button",{attrs:{type:t.btTypes[3],size:"small"},on:{click:function(e){return t.changeDate(-1)}}},[t._v("昨天")]),a("Button",{attrs:{type:t.btTypes[0],size:"small"},on:{click:function(e){return t.changeDate(1)}}},[t._v("今天")]),a("Button",{attrs:{type:t.btTypes[1],size:"small"},on:{click:function(e){return t.changeDate(7)}}},[t._v("近一周")]),a("Button",{attrs:{type:t.btTypes[2],size:"small"},on:{click:function(e){return t.changeDate(30)}}},[t._v("近一月")]),a("DatePicker",{staticStyle:{width:"200px"},attrs:{value:t.datasTime,format:"yyyy/MM/dd",type:"daterange",clearable:"",placement:"bottom-end",placeholder:"Select date"},on:{"on-change":t.pickerChange,"on-clear":t.clearDate}})],1),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary",loading:t.queryLoading,icon:"ios-search"},on:{click:t.toQuery}},[t._v("查询")])],1)],1),a("Table",{ref:"selection",attrs:{loading:t.queryLoading,border:"",columns:t.columns,data:t.tableDatas,stripe:""},on:{"on-sort-change":t.sortChange}}),a("Page",{staticClass:"margin-top-10",attrs:{total:t.total,"page-size-opts":[20,50,100],current:t.page,"class-name":"margin-top-10",size:"small","show-total":"","show-elevator":"","show-sizer":"","page-size":20},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.pageChange}}),a("GameLog",{attrs:{show:t.showGame,loading:t.gameLoading,scolumns:t.scolumns,stableDatas:t.stableDatas,columns:t.gColumns,tableDatas:t.gameTableDatas,current:t.gPage,total:t.gTotal},on:{cancel:function(e){t.showGame=!1},"page-change":t.gpageChange,"page-size-change":t.gpageSizeChange}}),a("Modal",{attrs:{title:"请填写忽略备注:",width:"400"},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"输入忽略备注..."},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}}),a("div",{staticStyle:{color:"#f60","text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.toHulv}},[t._v("确定")])],1)],1)],1)},r=[],n=a("cebc"),i=(a("96cf"),a("3b8d")),o=a("2708"),l=a("0f8a"),c={mixins:[o["a"]],components:{GameLog:l["a"]},data:function(){return{remark:"",gameLoading:!1,showGame:!1,gameTableDatas:[],gTotal:0,gColumns:[],gPage:1,g_per_page:20,gameUserId:0,queryLoading:!1,btTypes:["","","",""],statusObj:{0:"待审核",1:"打款完成",2:"拒绝",5:"忽略"},loading:!1,query:{game_type:0,UserID:"",Status:""},datasTime:[],page:1,per_page:20,total:0,showEdit:!1,showAdd:!1,addRow:{},editRow:{},columns:[],tableDatas:[],staticDatas:{},scolumns:[],stableDatas:[]}},mounted:function(){},computed:{},methods:{gpageChange:function(t){this.gPage=t,this.queryGameList()},gpageSizeChange:function(t){this.g_per_page!==t&&(this.g_per_page=t,this.queryGameList())},showGameModal:function(t){this.showGame=!0,this.gameUserId=this.tableDatas[t].FromUserID,this.gPage=1,this.toQueryAGGoldSource(),this.queryGameList()},queryGameList:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,s,r,n,i,o,l,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.gameLoading=!0,e=(this.gPage-1)*this.g_per_page,a=this.gPage*this.g_per_page,s={UserId:this.gameUserId,page:this.gPage,per_page:this.g_per_page,minIndex:e,maxIndex:a>this.gTotal&&this.gTotal&&this.gPage>1?this.gTotal:a},t.next=7,this.$store.dispatch("getGameLogs",s);case 7:for(r=t.sent,n=this.handleResult(r),this.gColumns=[],this.gameTableDatas=[],i=n.arrTitles,o=n.arrKeys,l=0;l<o.length;l++)c={title:i[l],sortable:"custom",minWidth:120,align:"center",key:o[l]},"AddGold"===c.key&&(c.render=function(t,e){return t("div",[t("span",{style:{color:e.row.AddGold<=0?"#ed3f14":"#19be6b"}},e.row.AddGold)])}),this.gColumns.push(c);this.gameTableDatas=n.tableDatas,this.gTotal=n.total,t.next=20;break;case 18:t.prev=18,t.t0=t["catch"](0);case 20:this.gameLoading=!1;case 21:case"end":return t.stop()}},t,this,[[0,18]])}));function e(){return t.apply(this,arguments)}return e}(),toQueryAGGoldSource:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,s,r,n,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={UserId:this.gameUserId},t.next=4,this.$store.dispatch("getAGGoldSource",e);case 4:for(a=t.sent,s=this.handleResult(a),this.scolumns=[],this.stableDatas=[],r=s.arrTitles,n=s.arrKeys,i=0;i<n.length;i++)o={title:r[i],sortable:"custom",minWidth:120,align:"center",key:n[i]},this.scolumns.push(o);this.stableDatas=s.tableDatas,t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](0);case 16:case"end":return t.stop()}},t,this,[[0,14]])}));function e(){return t.apply(this,arguments)}return e}(),init:function(){this.queryList()},sortChange:function(t){this.query.order_by=t.key+" "+t.order,this.queryList()},pickerChange:function(t,e){this.datasTime=t,this.clearDate()},clearDate:function(){this.btTypes=["","","",""]},changeDate:function(t){this.datasTime=[];var e=new Date,a=new Date;-1===t&&(this.btTypes=["","","","success"],e.setDate(e.getDate()-1),a.setDate(a.getDate()-1),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),1===t&&(this.btTypes=["success","","",""],this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),7===t&&(this.btTypes=["","success","",""],e.setDate(e.getDate()-6),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),30===t&&(this.btTypes=["","","success",""],e.setDate(e.getDate()-29),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)])},getDateFormate:function(t){return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()},pageChange:function(t){this.page=t,this.queryList()},pageSizeChange:function(t){this.per_page!==t&&(this.per_page=t,this.queryList())},queryList:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,s,r,i,o,l,c,u,h=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.queryLoading=!0,e=(this.page-1)*this.per_page,a=this.page*this.per_page,s=Object(n["a"])({page:this.page,per_page:this.per_page,minIndex:e,maxIndex:a>this.total&&this.total&&this.page>1?this.total:a},this.query,{start_time:this.datasTime.length>0&&this.datasTime[0]?this.datasTime[0]:"",end_time:this.datasTime.length>1&&this.datasTime[1]?this.datasTime[1]+" 23:59:59":""}),t.next=7,this.$store.dispatch("getPlayerTransferRecord",s);case 7:for(r=t.sent,i=this.handleResult(r),this.columns=[],o=i.arrTitles,l=i.arrKeys,c=0;c<l.length;c++)u={title:o[c],sortable:"custom",minWidth:15*o[c].length+48,align:"center",key:l[c]},"FromUserID"===u.key&&(u.render=function(t,e){return t("div",[t("a",{style:{color:"#2d8cf0"},on:{click:function(){h.showGameModal(e.index)}}},e.row.FromUserID)])}),"Status"===u.key&&(u.render=function(t,e){return t("span",h.statusObj[e.row.Status])}),this.columns.push(u);this.columns.push({title:"操作",key:"action",align:"center",width:170,render:function(t,e){return 0===e.row.Status||"0"===e.row.Status?t("div",[t("Poptip",{props:{confirm:!0,title:"您确认要拒绝吗？"},style:{textAlign:"left"},on:{"on-ok":function(){h.toUpdateSettlement(e.index,"2")},"on-cancel":function(){}}},[t("Button",{props:{type:"error",size:"small"}},"拒绝")]),t("Poptip",{props:{confirm:!0,title:"您确认要同意吗？"},style:{textAlign:"left",marginLeft:"5px"},on:{"on-ok":function(){h.toUpdateSettlement(e.index,"1")},"on-cancel":function(){}}},[t("Button",{props:{type:"success",size:"small"}},"同意")]),t("Button",{props:{type:"default",size:"small"},on:{click:function(){h.editRow={pkid:h.tableDatas[e.index].pkid,Status:"5"},h.showAdd=!0}},style:{textAlign:"left",marginLeft:"5px"}},"忽略")]):t("div","---")}}),this.tableDatas=i.tableDatas,this.total=i.total,t.next=20;break;case 18:t.prev=18,t.t0=t["catch"](0);case 20:this.queryLoading=!1;case 21:case"end":return t.stop()}},t,this,[[0,18]])}));function e(){return t.apply(this,arguments)}return e}(),toQuery:function(){this.page=1,this.queryList()},toUpdateSettlement:function(t,e){var a={pkid:this.tableDatas[t].pkid,Status:e};this.saveEdit(a)},saveEdit:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$store.dispatch("updatePlayerTransferRecord",e);case 4:a=t.sent,a.data&&a.data.hasOwnProperty("result")&&0!==a.data.result?this.$Message.error(a.data.szresult):(this.$Message.success("操作成功!"),setTimeout(function(){s.queryList()},3e3)),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:this.loading=!1;case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}(),cancel:function(){this.remark="",this.showAdd=!1,this.editRow={}},toHulv:function(){this.remark.trim().length?(this.editRow.remark=this.remark,this.saveEdit(this.editRow),this.showAdd=!1):this.$Message.error("请输入备注!")}}},u=c,h=(a("dbf3"),a("5a53"),a("2877")),g=Object(h["a"])(u,s,r,!1,null,"81baf7d2",null);e["default"]=g.exports},2708:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var s={methods:{handleResult:function(t,e){var a={arrKeys:[],arrTitles:[],tableDatas:[],total:0};if(t&&t.data){var s=t.data;if(s.arrTitles&&s.arrTitles.arrString&&s.arrTitles.arrString.length&&(a.arrTitles=s.arrTitles.arrString),s.arrKeys&&s.arrKeys.arrString&&s.arrKeys.arrString.length&&(a.arrKeys=s.arrKeys.arrString),a.arrKeys.length||(a.arrKeys=a.arrTitles),e||(e=a.arrKeys),s.arrDatas&&s.arrDatas.length)for(var r=0;r<s.arrDatas.length;r++){for(var n={},i=0;i<e.length;i++)n[e[i]]=s.arrDatas[r].arrString[i];a.tableDatas.push(n)}a.total=s.nTotal?s.nTotal:0}return a},IUDSuccess:function(t){return!(t&&t.data&&t.data.hasOwnProperty("result")&&1===t.data.result)},exportData:function(t,e){this.$refs[t].exportCsv({filename:e})}}}},"410c":function(t,e,a){},"5a53":function(t,e,a){"use strict";var s=a("6f11"),r=a.n(s);r.a},"6f11":function(t,e,a){},dbf3:function(t,e,a){"use strict";var s=a("410c"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-14ad4744.13a49a82.js.map