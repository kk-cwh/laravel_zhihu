(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0712d8c2"],{2708:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var s={methods:{handleResult:function(t,e){var a={arrKeys:[],arrTitles:[],tableDatas:[],total:0};if(t&&t.data){var s=t.data;if(s.arrTitles&&s.arrTitles.arrString&&s.arrTitles.arrString.length&&(a.arrTitles=s.arrTitles.arrString),s.arrKeys&&s.arrKeys.arrString&&s.arrKeys.arrString.length&&(a.arrKeys=s.arrKeys.arrString),a.arrKeys.length||(a.arrKeys=a.arrTitles),e||(e=a.arrKeys),s.arrDatas&&s.arrDatas.length)for(var i=0;i<s.arrDatas.length;i++){for(var r={},n=0;n<e.length;n++)r[e[n]]=s.arrDatas[i].arrString[n];a.tableDatas.push(r)}a.total=s.nTotal?s.nTotal:0}return a},IUDSuccess:function(t){return!(t&&t.data&&t.data.hasOwnProperty("result")&&1===t.data.result)},exportData:function(t,e){this.$refs[t].exportCsv({filename:e})}}}},3466:function(t,e,a){},"91a8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Form",{attrs:{"label-position":"right","label-width":70,inline:""}},[s("FormItem",{attrs:{label:"玩家ID:"}},[s("Input",{attrs:{clearable:"",type:"text",placeholder:"填写玩家ID"},model:{value:t.query.player_id,callback:function(e){t.$set(t.query,"player_id",e)},expression:"query.player_id"}})],1),s("FormItem",{attrs:{"label-width":1}},[s("Button",{attrs:{type:"primary",loading:t.queryLoading,icon:"ios-search"},on:{click:t.toQuery}},[t._v("查询")])],1)],1),s("Table",{ref:"selection",attrs:{loading:t.queryLoading,border:"",columns:t.columns,data:t.tableDatas,stripe:""}}),s("Page",{staticClass:"margin-top-10",attrs:{total:t.total,"page-size-opts":[20,50,100],current:t.page,"class-name":"margin-top-10",size:"small","show-total":"","show-elevator":"","show-sizer":"","page-size":20},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.pageChange}}),s("Modal",{attrs:{title:"玩家"+this.playerId+"的聊天记录",width:"560"},on:{"on-cancel":t.cancel},model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}},[s("ul",{ref:"message_box",staticClass:"message",attrs:{id:"ul_message_box1"}},t._l(t.chatMessages,function(e,i){return s("li",{key:i},[s("div",{staticClass:"main",class:{self:2===parseInt(e.u_type)}},[s("img",{staticClass:"avatar",attrs:{width:"30",height:"30",src:1===parseInt(e.u_type)?a("b1a0"):a("ee4f")}}),s("div",[t._v(t._s(e.created_at)+t._s(2===parseInt(e.u_type)?"  "+e.service_id:""))]),s("div",{staticClass:"text"},[t._v(t._s(e.msg))])])])}),0),s("div",{staticClass:"send-box",staticStyle:{color:"#f60"},attrs:{slot:"footer"},slot:"footer"})])],1)},i=[],r=(a("7f7f"),a("cebc")),n=(a("96cf"),a("3b8d")),o=a("2708"),c={mixins:[o["a"]],data:function(){var t=this;return{box:"",queryLoading:!1,btTypes:["","","",""],websocket:null,loading:!1,query:{game_type:0,UserId:"",servicetype:""},datasTime:[],page:1,per_page:20,total:0,showEdit:!1,showAdd:!1,playerId:"",chatCurrentPage:1,chatTotalPage:1,addRow:{},editRow:{},columns:[{title:"玩家ID",minWidth:100,key:"player_id"},{title:"提问次数",minWidth:120,key:"send_num"},{title:"最后提问时间",minWidth:100,key:"last_send_time"},{title:"最后的问题",minWidth:200,ellipsis:!0,key:"last_send_msg"},{title:"客服ID",minWidth:100,key:"service_id"},{title:"客服回答时间",minWidth:100,key:"last_replay_time"},{title:"客服回答",minWidth:200,key:"last_replay_msg"},{title:"操作",key:"action",align:"center",width:160,render:function(e,a){return e("div",[e("Button",{props:{type:"success",icon:"chatboxes",size:"small"},style:{marginRight:"2px"},on:{click:function(){t.showEditModal(t.tableDatas[a.index].player_id)}}},"查看详情")])}}],tableDatas:[],chatMessages:[],mymodel:"my-model1"}},watch:{},mounted:function(){},computed:{},methods:{init:function(){this.queryList()},pickerChange:function(t,e){this.datasTime=t,this.clearDate()},clearDate:function(){this.btTypes=["","","",""]},changeDate:function(t){this.datasTime=[];var e=new Date,a=new Date;-1===t&&(this.btTypes=["","","","success"],e.setDate(e.getDate()-1),a.setDate(a.getDate()-1),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),1===t&&(this.btTypes=["success","","",""],this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),7===t&&(this.btTypes=["","success","",""],e.setDate(e.getDate()-6),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)]),30===t&&(this.btTypes=["","","success",""],e.setDate(e.getDate()-29),this.datasTime=[this.getDateFormate(e),this.getDateFormate(a)])},getDateFormate:function(t){return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()},pageChange:function(t){this.page=t,this.queryList()},pageSizeChange:function(t){this.per_page!==t&&(this.per_page=t,this.queryList())},queryList:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.queryLoading=!0,e=Object(r["a"])({page:this.page,per_page:this.per_page},this.query,{start_time:this.datasTime.length>0&&this.datasTime[0]?this.datasTime[0]:"",end_time:this.datasTime.length>1&&this.datasTime[1]?this.datasTime[1]+" 23:59:59":""}),t.next=5,this.$store.dispatch("getPlayerSummary",e);case 5:a=t.sent,a&&(a.data&&(this.tableDatas=a.data),a.meta&&(this.total=a.meta.total)),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:this.queryLoading=!1;case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),toQuery:function(){this.page=1,this.queryList()},cancel:function(){this.showEdit=!1,this.showAdd=!1,this.init()},showEditModal:function(t){var e=this;this.showEdit=!0,this.playerId=t,this.queryChatMessages({player_id:this.playerId}),this.box=this.$refs.message_box,setTimeout(function(){e.$refs.message_box.scrollTop=e.$refs.message_box.scrollHeight},500),this.box.addEventListener("scroll",function(){e.throttle(e.queryMsg,e)},!1)},queryMsg:function(){0===this.$refs.message_box.scrollTop&&this.chatCurrentPage<this.chatTotalPage&&this.queryChatMessages({player_id:this.playerId,page:this.chatCurrentPage+1})},throttle:function(t,e){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)},toEdit:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.saveEdit(e.editRow)})},queryChatMessages:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.queryLoading=!0,t.next=4,this.$store.dispatch("getChatMessages",e);case 4:a=t.sent,a&&(a.data&&1===a.meta.current_page&&(this.chatMessages=a.data.reverse()),a.data&&a.meta.current_page>1&&(this.chatMessages=a.data.reverse().concat(this.chatMessages)),this.chatCurrentPage=a.meta&&a.meta.current_page?a.meta.current_page:1,this.chatTotalPage=a.meta&&a.meta.last_page?a.meta.last_page:1),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:this.queryLoading=!1;case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}()}},h=c,l=(a("fb23"),a("f455"),a("2877")),g=Object(l["a"])(h,s,i,!1,null,"91bd05d4",null);e["default"]=g.exports},a4b0:function(t,e,a){},b1a0:function(t,e){t.exports="data:image/png;base64,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"},ee4f:function(t,e,a){t.exports=a.p+"img/kf.95606d5e.png"},f455:function(t,e,a){"use strict";var s=a("a4b0"),i=a.n(s);i.a},fb23:function(t,e,a){"use strict";var s=a("3466"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-0712d8c2.2b90542b.js.map